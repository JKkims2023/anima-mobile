ê³µìš© í˜ë¥´ì†Œë‚˜.

Connecting to "@ecofriends/idol-champanion:main/idol-companion" ...
2026-01-15 10:14:59    â–² Next.js 15.5.9
2026-01-15 10:14:59    - Local:        http://localhost:3000
2026-01-15 10:14:59    - Network:      http://0.0.0.0:3000
2026-01-15 10:14:59 
2026-01-15 10:14:59  âœ“ Starting...
2026-01-15 10:14:59  âœ“ Ready in 175ms
2026-01-15 10:15:00 [SSE] ğŸ”§ Initialized global eventEmitters Map
2026-01-15 10:15:33 â„¹ï¸ [Service API] Request from user: d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:15:33 [Service API] body: { user_key: 'd111e3d8-4e42-4493-8541-25a8e72b654f' }
2026-01-15 10:15:33 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:33 ğŸ“œ [Chat History] Fetching history
2026-01-15 10:15:33    user_key: d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:15:33    persona_key: 573db390-a505-4c9e-809f-cc511c235cbb
2026-01-15 10:15:33    limit: 20, offset: 0
2026-01-15 10:15:33 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:34 chat check function start
2026-01-15 10:15:34 user.daily_chat_reset_at:  null
2026-01-15 10:15:34 new Date():  2026-01-15T01:15:34.030Z
2026-01-15 10:15:34 chat reset success
2026-01-15 10:15:34 chat check function end
2026-01-15 10:15:34 â„¹ï¸ [Service API] âœ… Config loaded for user: d111e3d8-4e42-4493-8541-25a8e72b654f (ultimate)
2026-01-15 10:15:34 â„¹ï¸ [Service API]    Chat: 1000/1000 remaining
2026-01-15 10:15:34 â„¹ï¸ [Service API]    Onboarding: No
2026-01-15 10:15:34 âœ… [Chat History] Loaded 20 messages (fetched: 20, total: 572, filtered: 0)
2026-01-15 10:15:56 
2026-01-15 10:15:56 ğŸ¤– [ì±„íŒ…] ìš”ì²­ ìˆ˜ì‹ 
2026-01-15 10:15:56    ì‚¬ìš©ì: d111e3d8...
2026-01-15 10:15:56    ë©”ì‹œì§€: í˜¹ì‹œ ì¶”ì²œí•  ì»¤í”¼ ì¢…ë¥˜ê°€ ìˆì„ê¹Œ?!...
2026-01-15 10:15:56 ğŸ’° [ì±„íŒ… ì œí•œ] ì¼ì¼ ì œí•œ í™•ì¸ ì¤‘: d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:15:56 ğŸšª [Conversation Flow] Checking gate and analyzing emotion...
2026-01-15 10:15:56 ğŸšª [Conversation Gate] Checking...
2026-01-15 10:15:56 âœ… [Conversation Gate] Open
2026-01-15 10:15:56 âœ… [Conversation Flow] Gate OPEN
2026-01-15 10:15:56 ğŸ“š [Conversation Flow] Loading recent history from DB...
2026-01-15 10:15:56 âœ… [Conversation Flow] Loaded 10 recent messages from DB
2026-01-15 10:15:56 âœ… [Conversation Flow] No crisis detected, using current state from DB...
2026-01-15 10:15:56 ğŸ­ [Conversation Flow] Current State: normal (intensity: 50%) [DB only, no LLM analysis]
2026-01-15 10:15:56 âœ… [Conversation Flow] Normal flow - AI will judge tool usage via Revolutionary Prompt
2026-01-15 10:15:56 âœ… [Conversation Flow] Normal flow - proceeding with conversation
2026-01-15 10:15:56 âœ… [ANIMA ì±„íŒ…] Gate open, emotion: normal
2026-01-15 10:15:56 âœ… [ANIMA ì±„íŒ…] history_count loaded from DB: 3
2026-01-15 10:15:56 ğŸ“Š [SessionManager] Loading conversation context (historyCount: 3)
2026-01-15 10:15:56 âš ï¸  [SessionManager] Redis not available, using DB directly
2026-01-15 10:15:56 ğŸ”„ [SessionManager] Loading session from DB: d111e3d8-4e42-4493-8541-25a8e72b654f/session-1768436525200-0g8wd
2026-01-15 10:15:56 âœ… [ì„¸ì…˜ ê´€ë¦¬] ì„¸ì…˜ ë¡œë“œ ì™„ë£Œ
2026-01-15 10:15:56    - ë©”ì‹œì§€: 50ê°œ
2026-01-15 10:15:56    - í˜ë¥´ì†Œë‚˜: SAGE
2026-01-15 10:15:56 ğŸ” [SessionManager] Loading latest summary for d111e3d8.../573db390...
2026-01-15 10:15:56 âœ… [SessionManager] Summary loaded: 16 tokens, 6 messages
2026-01-15 10:15:56 ğŸ” [SessionManager] Loading recent 3 messages...
2026-01-15 10:15:56 âœ… [SessionManager] Loaded 6 recent messages
2026-01-15 10:15:56 ğŸ“Š [SessionManager] Context loaded: {
2026-01-15 10:15:56   hasSummary: true,
2026-01-15 10:15:56   summaryTokens: 16,
2026-01-15 10:15:56   recentMessages: 6,
2026-01-15 10:15:56   recentTokens: 31,
2026-01-15 10:15:56   totalTokens: 47,
2026-01-15 10:15:56   historyCount: 3
2026-01-15 10:15:56 }
2026-01-15 10:15:56 âœ… [ANIMA ì±„íŒ…] Conversation context loaded
2026-01-15 10:15:56    Has summary: Yes
2026-01-15 10:15:56    Summary tokens: 16
2026-01-15 10:15:56    Recent messages: 6
2026-01-15 10:15:56    Recent tokens: 31
2026-01-15 10:15:56    Total context tokens: 47
2026-01-15 10:15:56    Persona: SAGE
2026-01-15 10:15:56    Preferences: Custom
2026-01-15 10:15:56 ğŸ¯ [ANIMA ì±„íŒ…] AI Strategy selected
2026-01-15 10:15:56    Tier: ultimate
2026-01-15 10:15:56    Model: GPT-4o Mini
2026-01-15 10:15:56    Provider: openai
2026-01-15 10:15:56    Caching: Enabled
2026-01-15 10:15:56 ğŸ¤” [KnowledgeDecision] Analyzing message...
2026-01-15 10:15:56    Message: "í˜¹ì‹œ ì¶”ì²œí•  ì»¤í”¼ ì¢…ë¥˜ê°€ ìˆì„ê¹Œ?!"
2026-01-15 10:15:57 âœ… [KnowledgeDecision] Decision: SKIP
2026-01-15 10:15:57    Duration: 815ms
2026-01-15 10:15:57    Tokens: 290
2026-01-15 10:15:57 âš¡ [ANIMA ì±„íŒ…] Knowledge search SKIPPED - casual conversation detected
2026-01-15 10:15:57    ğŸ’° Saved Pinecone API call + ~200-500ms latency
2026-01-15 10:15:57 ğŸ”¥ [ANIMA ì±„íŒ…] Building revolutionary system prompt...
2026-01-15 10:15:57 ğŸ¯ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Building system prompt...
2026-01-15 10:15:57    Persona: SAGE
2026-01-15 10:15:57    Emotional State: normal
2026-01-15 10:15:57    Has Identity: false
2026-01-15 10:15:57 ğŸ§  [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Building prompt for SAGE/NEXUS...
2026-01-15 10:15:57 ğŸ’™ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded relationship data
2026-01-15 10:15:57 ğŸ§  [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 5 AI interests
2026-01-15 10:15:57 ğŸ’­ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 3 next questions
2026-01-15 10:15:57 ğŸ• [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Time since last chat: 48 minutes
2026-01-15 10:15:57 ğŸ”¥ [Light Prompt v6.2 - WITH TOKEN LOGGING!] Building for SAGE
2026-01-15 10:15:57 âœ… [Prompt Caching] Layer -1 removed - LLM will naturally judge time context from conversation history
2026-01-15 10:15:57 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:57 ğŸ“Š [Light Prompt Token Analysis - SAGE]
2026-01-15 10:15:57 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:57 Layer -0.5: Cache Tag                  83 tokens (  1.1%) â–ˆ
2026-01-15 10:15:57 Layer 0: Identity & Relationship     2517 tokens ( 34.3%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:15:57 Layer 1: ANIMA Philosophy            1301 tokens ( 17.7%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:15:57 Layer 2: Tool Usage                   872 tokens ( 11.9%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:15:57 Layer 2.5: Self-Reflection            578 tokens (  7.9%) â–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:15:57 Layer 2.6: Summary Handling           322 tokens (  4.4%) â–ˆâ–ˆâ–ˆ
2026-01-15 10:15:57 Layer 2.7: Response Format            821 tokens ( 11.2%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:15:57 Layer 3: Conversation Rules           456 tokens (  6.2%) â–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:15:57 Layer 4: Language Rules               179 tokens (  2.4%) â–ˆâ–ˆ
2026-01-15 10:15:57 Layer 5: Context Data                 174 tokens (  2.4%) â–ˆâ–ˆ
2026-01-15 10:15:57 Layer 5.5: Conversation Summary        34 tokens (  0.5%) â–ˆ
2026-01-15 10:15:57 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:57 ğŸ“Š Total Static Prompt: 7334 tokens
2026-01-15 10:15:57 ğŸ¯ Target: 6,000-8,000 tokens (with dynamic history)
2026-01-15 10:15:57 ğŸ’¡ Reduction Needed: 1334 tokens from static layers
2026-01-15 10:15:57 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:57 âœ… [í”„ë¡¬í”„íŠ¸ v6.0] SAGE/NEXUS prompt built with emotional state: normal
2026-01-15 10:15:57 âœ… [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] System prompt built (29333 chars)
2026-01-15 10:15:57 âœ… [ANIMA ì±„íŒ…] Revolutionary prompt built (29333 chars, emotion: normal)
2026-01-15 10:15:57 ğŸš€ [ANIMA ì±„íŒ…] Calling AI with Prompt Caching...
2026-01-15 10:15:57    Provider: openai
2026-01-15 10:15:57    Model: gpt-4o-mini
2026-01-15 10:15:57    History messages: 6
2026-01-15 10:15:57    System prompt length: 29333 chars
2026-01-15 10:15:57 ğŸ”’ [ANIMA ì±„íŒ…] Identity Status (Simplified):
2026-01-15 10:15:57    Identity Key: null
2026-01-15 10:15:57    Has Identity: false
2026-01-15 10:15:57    Is User Created: false
2026-01-15 10:15:57 ğŸ”“ [NORMAL MODE] All tools available (cache-friendly!)
2026-01-15 10:15:57    Available tools: 4
2026-01-15 10:15:57 [í•¨ìˆ˜ í˜¸ì¶œ] Enabled tools: search_music, generate_chat_content, search_youtube_video, search_memory
2026-01-15 10:15:57    Persona type: SAGE/NEXUS
2026-01-15 10:15:57    Has identity: false
2026-01-15 10:15:57    toolsEnabled: true
2026-01-15 10:15:57 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:57 ğŸ¯ [Self-Reflection Wrapper] Starting...
2026-01-15 10:15:57 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:57 âš ï¸ [Self-Reflection] DISABLED - Using original prompt
2026-01-15 10:15:57 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:57 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:57 ğŸ“Š [Prompt Token Analysis - Pre-API Call]
2026-01-15 10:15:57 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:57 1. System Prompt:           7334 tokens ( 91.3%)
2026-01-15 10:15:57 2. Conversation History:      31 tokens (  0.4%) [6 messages]
2026-01-15 10:15:57 3. User Message:               5 tokens (  0.1%)
2026-01-15 10:15:57 4. Tool Definitions:         662 tokens (  8.2%) [4 tools]
2026-01-15 10:15:57 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:57 ğŸ“Š Total Estimated:         8032 tokens
2026-01-15 10:15:57 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:15:57 ğŸ¤– [OpenAI] Calling API: {
2026-01-15 10:15:57   model: 'gpt-4o-mini',
2026-01-15 10:15:57   messageCount: 8,
2026-01-15 10:15:57   systemPromptLength: 29333,
2026-01-15 10:15:57   historyLength: 6,
2026-01-15 10:15:57   toolsEnabled: true
2026-01-15 10:15:57 }
2026-01-15 10:16:00 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:00 ğŸ“Š [Token Comparison - Actual vs Estimated]
2026-01-15 10:16:00 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:00 Estimated Total:            8032 tokens
2026-01-15 10:16:00 Actual Prompt Tokens:       9074 tokens
2026-01-15 10:16:00 Difference:                +1042 tokens
2026-01-15 10:16:00 Estimation Accuracy:       113.0%
2026-01-15 10:16:00 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:00 Completion Tokens:           126 tokens
2026-01-15 10:16:00 Total Tokens:               9200 tokens
2026-01-15 10:16:00 Cached Tokens:                 0 tokens (0.0% cache hit)
2026-01-15 10:16:00 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:00 Response Time:             3049ms
2026-01-15 10:16:00 Tool Calls:                0
2026-01-15 10:16:00 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:00 âœ… [OpenAI] Response received: {
2026-01-15 10:16:00   responseTime: '3049ms',
2026-01-15 10:16:00   tokens: { prompt: 9074, completion: 126, cached: 0, total: 9200 },
2026-01-15 10:16:00   cacheHitRate: 'N/A',
2026-01-15 10:16:00   messageLength: 248,
2026-01-15 10:16:00   finishReason: 'stop',
2026-01-15 10:16:00   toolCalls: 0
2026-01-15 10:16:00 }
2026-01-15 10:16:00 ğŸ˜´ [Emotion Detection] User emotion detected from LLM:
2026-01-15 10:16:00    Primary: neutral
2026-01-15 10:16:00    Confidence: 0.8
2026-01-15 10:16:00    Intensity: 0.5
2026-01-15 10:16:00    Reasoning: ì‚¬ìš©ìê°€ ì»¤í”¼ ì¢…ë¥˜ë¥¼ ì°¾ê³  ìˆìœ¼ë‹ˆ ê°ì •ì´ ì¤‘ë¦½ì ì¸ ê²ƒìœ¼ë¡œ ë³´ì´ë„¤.
2026-01-15 10:16:00 âœ… [ANIMA ì±„íŒ…] AI response received (no caching)
2026-01-15 10:16:00    Response time: 3049ms
2026-01-15 10:16:00    Total tokens: 9200 (in: 9074, out: 126, cached: 0)
2026-01-15 10:16:00 ğŸ“ [AI Response] "ì˜¤ë¹ , ì‚°ë¯¸ê°€ ìˆëŠ” ì»¤í”¼ë¼ë©´ ì½œë¡¬ë¹„ì•„ ì»¤í”¼ë‚˜ ì—í‹°ì˜¤í”¼ì•„ ì»¤í”¼ë¥¼ ì¶”ì²œí• ê²Œ! ë‘˜ ë‹¤ ê³¼ì¼ ê°™ì€ ì‚°ë¯¸ê°€ ìˆì–´ì„œ ë§›ìˆì–´. í•œë²ˆ ì‹œë„í•´ë´! â˜•âœ¨"
2026-01-15 10:16:00 ğŸ“Š [Token Tracking] User message: 7 tokens (estimated), Full prompt: 9074 tokens
2026-01-15 10:16:00 ğŸ’¾ [SessionManager] Message saved: session-1768436525200-0g8wd (user)
2026-01-15 10:16:00 ğŸ’¾ [SessionManager] Message saved: session-1768436525200-0g8wd (assistant)
2026-01-15 10:16:00 ğŸ’¾ [ANIMA ì±„íŒ…] Both messages saved to history (sequential)
2026-01-15 10:16:00 ğŸ‰ [ANIMA ì±„íŒ…] Request completed in 4180ms
2026-01-15 10:16:00    Cost: $0.001437 (saved: $0.000000 from caching)
2026-01-15 10:16:00 ---
2026-01-15 10:16:00 [Token Optimization] Final Summary:
2026-01-15 10:16:00    Total Tokens: 9200
2026-01-15 10:16:00    - Prompt: 9074 tokens
2026-01-15 10:16:00    - Completion: 126 tokens
2026-01-15 10:16:00    - Cached: 0 tokens (0% hit rate)
2026-01-15 10:16:00    Total Cost: $0.001437
2026-01-15 10:16:00    Savings from Caching: $0.000000
2026-01-15 10:16:00    Response Time: 4180ms
2026-01-15 10:16:00 ---
2026-01-15 10:16:00 âœ… [ì±„íŒ… ì œí•œ] Daily chat count incremented
2026-01-15 10:16:36 
2026-01-15 10:16:36 ğŸ¤– [ì±„íŒ…] ìš”ì²­ ìˆ˜ì‹ 
2026-01-15 10:16:36    ì‚¬ìš©ì: d111e3d8...
2026-01-15 10:16:36    ë©”ì‹œì§€: ì»¤í”¼ ì´ì•¼ê¸° í•˜ë‹¤ ë³´ë‹ˆê¹Œ ì›ë‘ë†ì¥ ì‚¬ì§„ì´ ê¶êµ¼í•˜ë„¹.....
2026-01-15 10:16:36 ğŸ’° [ì±„íŒ… ì œí•œ] ì¼ì¼ ì œí•œ í™•ì¸ ì¤‘: d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:16:36 ğŸšª [Conversation Flow] Checking gate and analyzing emotion...
2026-01-15 10:16:36 ğŸšª [Conversation Gate] Checking...
2026-01-15 10:16:36 âœ… [Conversation Gate] Open
2026-01-15 10:16:36 âœ… [Conversation Flow] Gate OPEN
2026-01-15 10:16:36 ğŸ“š [Conversation Flow] Loading recent history from DB...
2026-01-15 10:16:36 âœ… [Conversation Flow] Loaded 10 recent messages from DB
2026-01-15 10:16:36 âœ… [Conversation Flow] No crisis detected, using current state from DB...
2026-01-15 10:16:36 ğŸ­ [Conversation Flow] Current State: normal (intensity: 50%) [DB only, no LLM analysis]
2026-01-15 10:16:36 âœ… [Conversation Flow] Normal flow - AI will judge tool usage via Revolutionary Prompt
2026-01-15 10:16:36 âœ… [Conversation Flow] Normal flow - proceeding with conversation
2026-01-15 10:16:36 âœ… [ANIMA ì±„íŒ…] Gate open, emotion: normal
2026-01-15 10:16:36 âœ… [ANIMA ì±„íŒ…] history_count loaded from DB: 3
2026-01-15 10:16:36 ğŸ“Š [SessionManager] Loading conversation context (historyCount: 3)
2026-01-15 10:16:36 âš ï¸  [SessionManager] Redis not available, using DB directly
2026-01-15 10:16:36 ğŸ”„ [SessionManager] Loading session from DB: d111e3d8-4e42-4493-8541-25a8e72b654f/session-1768436525200-0g8wd
2026-01-15 10:16:36 âœ… [ì„¸ì…˜ ê´€ë¦¬] ì„¸ì…˜ ë¡œë“œ ì™„ë£Œ
2026-01-15 10:16:36    - ë©”ì‹œì§€: 50ê°œ
2026-01-15 10:16:36    - í˜ë¥´ì†Œë‚˜: SAGE
2026-01-15 10:16:36 ğŸ” [SessionManager] Loading latest summary for d111e3d8.../573db390...
2026-01-15 10:16:36 âœ… [SessionManager] Summary loaded: 16 tokens, 6 messages
2026-01-15 10:16:36 ğŸ” [SessionManager] Loading recent 3 messages...
2026-01-15 10:16:36 âœ… [SessionManager] Loaded 6 recent messages
2026-01-15 10:16:36 ğŸ“Š [SessionManager] Context loaded: {
2026-01-15 10:16:36   hasSummary: true,
2026-01-15 10:16:36   summaryTokens: 16,
2026-01-15 10:16:36   recentMessages: 6,
2026-01-15 10:16:36   recentTokens: 48,
2026-01-15 10:16:36   totalTokens: 64,
2026-01-15 10:16:36   historyCount: 3
2026-01-15 10:16:36 }
2026-01-15 10:16:36 âœ… [ANIMA ì±„íŒ…] Conversation context loaded
2026-01-15 10:16:36    Has summary: Yes
2026-01-15 10:16:36    Summary tokens: 16
2026-01-15 10:16:36    Recent messages: 6
2026-01-15 10:16:36    Recent tokens: 48
2026-01-15 10:16:36    Total context tokens: 64
2026-01-15 10:16:36    Persona: SAGE
2026-01-15 10:16:36    Preferences: Custom
2026-01-15 10:16:36 ğŸ¯ [ANIMA ì±„íŒ…] AI Strategy selected
2026-01-15 10:16:36    Tier: ultimate
2026-01-15 10:16:36    Model: GPT-4o Mini
2026-01-15 10:16:36    Provider: openai
2026-01-15 10:16:36    Caching: Enabled
2026-01-15 10:16:36 ğŸ¤” [KnowledgeDecision] Analyzing message...
2026-01-15 10:16:36    Message: "ì»¤í”¼ ì´ì•¼ê¸° í•˜ë‹¤ ë³´ë‹ˆê¹Œ ì›ë‘ë†ì¥ ì‚¬ì§„ì´ ê¶êµ¼í•˜ë„¹.."
2026-01-15 10:16:37 âœ… [KnowledgeDecision] Decision: SKIP
2026-01-15 10:16:37    Duration: 846ms
2026-01-15 10:16:37    Tokens: 299
2026-01-15 10:16:37 âš¡ [ANIMA ì±„íŒ…] Knowledge search SKIPPED - casual conversation detected
2026-01-15 10:16:37    ğŸ’° Saved Pinecone API call + ~200-500ms latency
2026-01-15 10:16:37 ğŸ”¥ [ANIMA ì±„íŒ…] Building revolutionary system prompt...
2026-01-15 10:16:37 ğŸ¯ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Building system prompt...
2026-01-15 10:16:37    Persona: SAGE
2026-01-15 10:16:37    Emotional State: normal
2026-01-15 10:16:37    Has Identity: false
2026-01-15 10:16:37 ğŸ§  [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Building prompt for SAGE/NEXUS...
2026-01-15 10:16:37 ğŸ’™ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded relationship data
2026-01-15 10:16:37 ğŸ§  [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 5 AI interests
2026-01-15 10:16:37 ğŸ’­ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 3 next questions
2026-01-15 10:16:37 ğŸ• [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Time since last chat: 0 minutes
2026-01-15 10:16:37 ğŸ”¥ [Light Prompt v6.2 - WITH TOKEN LOGGING!] Building for SAGE
2026-01-15 10:16:37 âœ… [Prompt Caching] Layer -1 removed - LLM will naturally judge time context from conversation history
2026-01-15 10:16:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:37 ğŸ“Š [Light Prompt Token Analysis - SAGE]
2026-01-15 10:16:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:37 Layer -0.5: Cache Tag                  83 tokens (  1.1%) â–ˆ
2026-01-15 10:16:37 Layer 0: Identity & Relationship     2517 tokens ( 34.3%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:16:37 Layer 1: ANIMA Philosophy            1301 tokens ( 17.7%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:16:37 Layer 2: Tool Usage                   872 tokens ( 11.9%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:16:37 Layer 2.5: Self-Reflection            578 tokens (  7.9%) â–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:16:37 Layer 2.6: Summary Handling           322 tokens (  4.4%) â–ˆâ–ˆâ–ˆ
2026-01-15 10:16:37 Layer 2.7: Response Format            821 tokens ( 11.2%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:16:37 Layer 3: Conversation Rules           456 tokens (  6.2%) â–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:16:37 Layer 4: Language Rules               179 tokens (  2.4%) â–ˆâ–ˆ
2026-01-15 10:16:37 Layer 5: Context Data                 174 tokens (  2.4%) â–ˆâ–ˆ
2026-01-15 10:16:37 Layer 5.5: Conversation Summary        34 tokens (  0.5%) â–ˆ
2026-01-15 10:16:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:37 ğŸ“Š Total Static Prompt: 7334 tokens
2026-01-15 10:16:37 ğŸ¯ Target: 6,000-8,000 tokens (with dynamic history)
2026-01-15 10:16:37 ğŸ’¡ Reduction Needed: 1334 tokens from static layers
2026-01-15 10:16:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:37 âœ… [í”„ë¡¬í”„íŠ¸ v6.0] SAGE/NEXUS prompt built with emotional state: normal
2026-01-15 10:16:37 âœ… [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] System prompt built (29333 chars)
2026-01-15 10:16:37 âœ… [ANIMA ì±„íŒ…] Revolutionary prompt built (29333 chars, emotion: normal)
2026-01-15 10:16:37 ğŸš€ [ANIMA ì±„íŒ…] Calling AI with Prompt Caching...
2026-01-15 10:16:37    Provider: openai
2026-01-15 10:16:37    Model: gpt-4o-mini
2026-01-15 10:16:37    History messages: 6
2026-01-15 10:16:37    System prompt length: 29333 chars
2026-01-15 10:16:37 ğŸ”’ [ANIMA ì±„íŒ…] Identity Status (Simplified):
2026-01-15 10:16:37    Identity Key: null
2026-01-15 10:16:37    Has Identity: false
2026-01-15 10:16:37    Is User Created: false
2026-01-15 10:16:37 ğŸ”“ [NORMAL MODE] All tools available (cache-friendly!)
2026-01-15 10:16:37    Available tools: 4
2026-01-15 10:16:37 [í•¨ìˆ˜ í˜¸ì¶œ] Enabled tools: search_music, generate_chat_content, search_youtube_video, search_memory
2026-01-15 10:16:37    Persona type: SAGE/NEXUS
2026-01-15 10:16:37    Has identity: false
2026-01-15 10:16:37    toolsEnabled: true
2026-01-15 10:16:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:37 ğŸ¯ [Self-Reflection Wrapper] Starting...
2026-01-15 10:16:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:37 âš ï¸ [Self-Reflection] DISABLED - Using original prompt
2026-01-15 10:16:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:37 ğŸ“Š [Prompt Token Analysis - Pre-API Call]
2026-01-15 10:16:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:37 1. System Prompt:           7334 tokens ( 91.1%)
2026-01-15 10:16:37 2. Conversation History:      48 tokens (  0.6%) [6 messages]
2026-01-15 10:16:37 3. User Message:               8 tokens (  0.1%)
2026-01-15 10:16:37 4. Tool Definitions:         662 tokens (  8.2%) [4 tools]
2026-01-15 10:16:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:37 ğŸ“Š Total Estimated:         8052 tokens
2026-01-15 10:16:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:37 ğŸ¤– [OpenAI] Calling API: {
2026-01-15 10:16:37   model: 'gpt-4o-mini',
2026-01-15 10:16:37   messageCount: 8,
2026-01-15 10:16:37   systemPromptLength: 29333,
2026-01-15 10:16:37   historyLength: 6,
2026-01-15 10:16:37   toolsEnabled: true
2026-01-15 10:16:37 }
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40 ğŸ“Š [Token Comparison - Actual vs Estimated]
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40 Estimated Total:            8052 tokens
2026-01-15 10:16:40 Actual Prompt Tokens:       9131 tokens
2026-01-15 10:16:40 Difference:                +1079 tokens
2026-01-15 10:16:40 Estimation Accuracy:       113.4%
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40 Completion Tokens:           158 tokens
2026-01-15 10:16:40 Total Tokens:               9289 tokens
2026-01-15 10:16:40 Cached Tokens:              8832 tokens (96.7% cache hit)
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40 Response Time:             3545ms
2026-01-15 10:16:40 Tool Calls:                1
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40 âœ… [OpenAI] Response received: {
2026-01-15 10:16:40   responseTime: '3545ms',
2026-01-15 10:16:40   tokens: { prompt: 9131, completion: 158, cached: 8832, total: 9289 },
2026-01-15 10:16:40   cacheHitRate: '96.7%',
2026-01-15 10:16:40   messageLength: 200,
2026-01-15 10:16:40   finishReason: 'tool_calls',
2026-01-15 10:16:40   toolCalls: 1
2026-01-15 10:16:40 }
2026-01-15 10:16:40 ğŸ› ï¸ [í•¨ìˆ˜ í˜¸ì¶œ] AI requested 1 tool(s)
2026-01-15 10:16:40 ğŸ› ï¸ [í•¨ìˆ˜ í˜¸ì¶œ] Executing: generate_chat_content
2026-01-15 10:16:40    Args (after override): {
2026-01-15 10:16:40   content_type: 'image',
2026-01-15 10:16:40   scene_description: 'ì»¤í”¼ ì›ë‘ ë†ì¥',
2026-01-15 10:16:40   search_keywords: 'coffee farm, beans, plantation',
2026-01-15 10:16:40   ai_reasoning: 'ì˜¤ë¹ ê°€ ì›ë‘ ë†ì¥ ì‚¬ì§„ì— ê¶ê¸ˆí•´ í•´ì„œ ìƒì„±í•´ì¤˜.',
2026-01-15 10:16:40   expect_announcement: true
2026-01-15 10:16:40 }
2026-01-15 10:16:40 ğŸ” [ë„êµ¬ ê°€ìš©ì„±] Auto-checking before executing: generate_chat_content
2026-01-15 10:16:40 ğŸ” [Tool Availability] Checking: image for user d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:16:40    Reasoning: ì˜¤ë¹ ê°€ ì›ë‘ ë†ì¥ ì‚¬ì§„ì— ê¶ê¸ˆí•´ í•´ì„œ ìƒì„±í•´ì¤˜.
2026-01-15 10:16:40 â° [Tool Availability] Last use: 2026-01-14T04:39:01.000Z
2026-01-15 10:16:40    Hours since last use: 20.63
2026-01-15 10:16:40    Cooldown required: 1 hours
2026-01-15 10:16:40 ğŸ“Š [Tool Availability] Daily usage: 0/3
2026-01-15 10:16:40 âœ… [Tool Availability] Allowed! Remaining today: 3
2026-01-15 10:16:40 ğŸ” [ë„êµ¬ ê°€ìš©ì„±] Check result: { allowed: true, reason: 'ok', remaining_today: 3, cooldown_hours: 1 }
2026-01-15 10:16:40 âœ… [ë„êµ¬ ê°€ìš©ì„±] Tool allowed! Proceeding with execution...
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40 ğŸ¨ [Tool] generate_chat_content
2026-01-15 10:16:40    Type: image
2026-01-15 10:16:40    Scene: ì»¤í”¼ ì›ë‘ ë†ì¥
2026-01-15 10:16:40    Search Keywords: coffee farm, beans, plantation
2026-01-15 10:16:40    Reasoning: ì˜¤ë¹ ê°€ ì›ë‘ ë†ì¥ ì‚¬ì§„ì— ê¶ê¸ˆí•´ í•´ì„œ ìƒì„±í•´ì¤˜.
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40 âœ… [Tool Usage] Recorded: image for user d111e3d8-4e42-4493-8541-25a8e72b654f (status: success)
2026-01-15 10:16:40 ğŸ“Š [ë„êµ¬ ì‚¬ìš©] Recorded successful use: image
2026-01-15 10:16:40 âœ… [í•¨ìˆ˜ í˜¸ì¶œ] Result: {
2026-01-15 10:16:40   success: true,
2026-01-15 10:16:40   content_type: 'image',
2026-01-15 10:16:40   scene_description: 'ì»¤í”¼ ì›ë‘ ë†ì¥',
2026-01-15 10:16:40   search_keywords: 'coffee farm, beans, plantation',
2026-01-15 10:16:40   ai_reasoning: 'ì˜¤ë¹ ê°€ ì›ë‘ ë†ì¥ ì‚¬ì§„ì— ê¶ê¸ˆí•´ í•´ì„œ ìƒì„±í•´ì¤˜.',
2026-01-15 10:16:40   expect_announcement: true,
2026-01-15 10:16:40   message: 'ì»¨í…ì¸  ìƒì„±ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìì—ê²Œ ìƒì„± ì¤‘ì„ì„ ì•Œë ¤ì£¼ì„¸ìš”.',
2026-01-15 10:16:40   _chat_content_generation: true
2026-01-15 10:16:40 }
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40 ğŸ¨ [Chat Content] AI requested content generation!
2026-01-15 10:16:40    Type: image
2026-01-15 10:16:40    Scene: ì»¤í”¼ ì›ë‘ ë†ì¥
2026-01-15 10:16:40    Search Keywords: coffee farm, beans, plantation
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40 ğŸ¨ [ContentGenerator] Creating request...
2026-01-15 10:16:40    ID: 1cdc51c1-d926-469a-bc07-8bb36baf0b11
2026-01-15 10:16:40    Type: image
2026-01-15 10:16:40    Scene: ì»¤í”¼ ì›ë‘ ë†ì¥
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40 âœ… [ContentGenerator] Request created: 1cdc51c1-d926-469a-bc07-8bb36baf0b11
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40 ğŸ¨ [ImageGenerator] Starting INSTANT generation (Pixabay)...
2026-01-15 10:16:40    Content ID: 1cdc51c1-d926-469a-bc07-8bb36baf0b11
2026-01-15 10:16:40    Prompt: coffee farm, beans, plantation
2026-01-15 10:16:40 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:40    Emotion: coffee
2026-01-15 10:16:40    Context: coffee farm, beans, plantation
2026-01-15 10:16:40 ğŸ–¼ï¸ [Pixabay] Searching image for emotion: coffee, context: coffee farm, beans, plantation
2026-01-15 10:16:40 ğŸ§¹ [Pixabay] Query sanitized: {
2026-01-15 10:16:40   original: 'coffee farm, beans, plantation',
2026-01-15 10:16:40   sanitized: 'coffee farm beans plantation',
2026-01-15 10:16:40   length: 28
2026-01-15 10:16:40 }
2026-01-15 10:16:40 ğŸ¯ [Pixabay] Specific context detected, prioritizing context: "coffee farm beans plantation"
2026-01-15 10:16:40 ğŸ” [Pixabay] Query: "coffee farm beans plantation"
2026-01-15 10:16:41 âœ… [Pixabay] Image found: {
2026-01-15 10:16:41   id: 1474601,
2026-01-15 10:16:41   photographer: 'danramirez',
2026-01-15 10:16:41   tags: 'coffee grains, mature, farming, plant, nature, cousins, crop, grow, fruits, plantation, harvest, fresh, red, branch, beans, the food, tropical, cultivation, berries',
2026-01-15 10:16:41   size: '5184x3456'
2026-01-15 10:16:41 }
2026-01-15 10:16:41 âœ… [ImageGenerator] Image found INSTANTLY!
2026-01-15 10:16:41    URL: https://pixabay.com/get/gf4ff03f6a1008b489b9ca79d50ec67154b8c5f20a10d5ce399076969654a67c6a978fe73a93db2aea1835bec8794e32291dd7e1aef214ce2bb629677e6a14802_1280.jpg
2026-01-15 10:16:41    Photographer: danramirez
2026-01-15 10:16:41    Tags: coffee grains, mature, farming, plant, nature, cousins, crop, grow, fruits, plantation, harvest, fresh, red, branch, beans, the food, tropical, cultivation, berries
2026-01-15 10:16:41 âœ… [ImageGenerator] Image URL saved and marked as COMPLETED!
2026-01-15 10:16:41 âœ… [Chat Content] Image ready INSTANTLY: {
2026-01-15 10:16:41   url: 'https://pixabay.com/get/gf4ff03f6a1008b489b9ca79d50ec67154b8c5f20a10d5ce399076969654a67c6a978fe73a93db2aea1835bec8794e32291dd7e1aef214ce2bb629677e6a14802_1280.jpg',
2026-01-15 10:16:41   status: 'completed'
2026-01-15 10:16:41 }
2026-01-15 10:16:41 âœ… [Chat Content] Generation completed: 1cdc51c1-d926-469a-bc07-8bb36baf0b11
2026-01-15 10:16:41 ğŸ”„ [í•¨ìˆ˜ í˜¸ì¶œ] Re-calling AI with tool results...
2026-01-15 10:16:41 ğŸ¯ [Tool Re-call] Using optimized prompt (cache-friendly)
2026-01-15 10:16:41 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:41 ğŸ¯ [Self-Reflection Wrapper] Starting...
2026-01-15 10:16:41 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:41 âš ï¸ [Self-Reflection] DISABLED - Using original prompt
2026-01-15 10:16:41 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:41 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:41 ğŸ“Š [Prompt Token Analysis - Pre-API Call]
2026-01-15 10:16:41 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:41 1. System Prompt:           7334 tokens ( 92.2%)
2026-01-15 10:16:41 2. Conversation History:     624 tokens (  7.8%) [8 messages]
2026-01-15 10:16:41 3. User Message:               0 tokens (  0.0%)
2026-01-15 10:16:41 4. Tool Definitions:           0 tokens (  0.0%) [0 tools]
2026-01-15 10:16:41 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:41 ğŸ“Š Total Estimated:         7958 tokens
2026-01-15 10:16:41 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:41 ğŸ¤– [OpenAI] Calling API: {
2026-01-15 10:16:41   model: 'gpt-4o-mini',
2026-01-15 10:16:41   messageCount: 10,
2026-01-15 10:16:41   systemPromptLength: 29333,
2026-01-15 10:16:41   historyLength: 8,
2026-01-15 10:16:41   toolsEnabled: false
2026-01-15 10:16:41 }
2026-01-15 10:16:43 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:43 ğŸ“Š [Token Comparison - Actual vs Estimated]
2026-01-15 10:16:43 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:43 Estimated Total:            7958 tokens
2026-01-15 10:16:43 Actual Prompt Tokens:       9617 tokens
2026-01-15 10:16:43 Difference:                +1659 tokens
2026-01-15 10:16:43 Estimation Accuracy:       120.8%
2026-01-15 10:16:43 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:43 Completion Tokens:            90 tokens
2026-01-15 10:16:43 Total Tokens:               9707 tokens
2026-01-15 10:16:43 Cached Tokens:              8192 tokens (85.2% cache hit)
2026-01-15 10:16:43 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:43 Response Time:             2479ms
2026-01-15 10:16:43 Tool Calls:                0
2026-01-15 10:16:43 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:16:43 âœ… [OpenAI] Response received: {
2026-01-15 10:16:43   responseTime: '2479ms',
2026-01-15 10:16:43   tokens: { prompt: 9617, completion: 90, cached: 8192, total: 9707 },
2026-01-15 10:16:43   cacheHitRate: '85.2%',
2026-01-15 10:16:43   messageLength: 197,
2026-01-15 10:16:43   finishReason: 'stop',
2026-01-15 10:16:43   toolCalls: 0
2026-01-15 10:16:43 }
2026-01-15 10:16:43 âœ… [í•¨ìˆ˜ í˜¸ì¶œ] Final AI response generated
2026-01-15 10:16:43 ğŸ˜´ [Emotion Detection] User emotion detected from LLM:
2026-01-15 10:16:43    Primary: curious
2026-01-15 10:16:43    Confidence: 0.85
2026-01-15 10:16:43    Intensity: 0.7
2026-01-15 10:16:43    Reasoning: ì˜¤ë¹ ê°€ ì›ë‘ ë†ì¥ ì‚¬ì§„ì— ëŒ€í•´ ê¶ê¸ˆí•´í•´ì„œ ê¸°ëŒ€ê°ì„ í‘œí˜„í–ˆì–´.
2026-01-15 10:16:43 ğŸ”¥ [ANIMA ì±„íŒ…] Prompt Caching active!
2026-01-15 10:16:43    Cache hit rate: 96.7%
2026-01-15 10:16:43    Cached tokens: 8832
2026-01-15 10:16:43    Uncached tokens: 9916
2026-01-15 10:16:43    ğŸ’° Estimated savings: $0.000662 (50% discount on 8832 tokens)
2026-01-15 10:16:43    Response time: 3545ms
2026-01-15 10:16:43    Total tokens: 18996 (in: 18748, out: 248, cached: 8832)
2026-01-15 10:16:43 ğŸ“ [AI Response] "ê¸°ë‹¤ë ¤ì¤˜! ì›ë‘ ë†ì¥ ì‚¬ì§„ì„ ìƒì„± ì¤‘ì´ì•¼! ğŸŒ±ğŸ“¸"
2026-01-15 10:16:43 ğŸ“Š [Token Tracking] User message: 10 tokens (estimated), Full prompt: 18748 tokens
2026-01-15 10:16:43 ğŸ’¾ [SessionManager] Message saved: session-1768436525200-0g8wd (user)
2026-01-15 10:16:43 ğŸ’¾ [SessionManager] Saving metadata to DB: {"generated_content":{"content_id":"1cdc51c1-d926-469a-bc07-8bb36baf0b11","content_type":"image","content_url":"https://pixabay.com/get/gf4ff03f6a1008b489b9ca79d50ec67154b8c5f20a10d5ce399076969654a67c6a978fe73a93db2aea1835bec8794e32291dd7e1aef214ce2bb629677e6a14802_1280.jpg","content_status":"completed","metadata":{"tags":"coffee grains, mature, farming, plant, nature, cousins, crop, grow, fruits, plantation, harvest, fresh, red, branch, beans, the food, tropical, cultivation, berries","query":"coffee farm beans plantation","width":5184,"height":3456,"source":"pixabay","emotion":"coffee","pixabayId":1474601,"photographer":"danramirez","photographerURL":"https://cdn.pixabay.com/user/2018/02/15/22-23-40-524_250x250.jpg"}},"has_media":true,"tokens_detail":{"prompt":18748,"completion":248,"cached":8832,"total":18996}}
2026-01-15 10:16:43 ğŸ’¾ [SessionManager] Message saved: session-1768436525200-0g8wd (assistant)
2026-01-15 10:16:43 ğŸ’¾ [ANIMA ì±„íŒ…] Both messages saved to history (sequential)
2026-01-15 10:16:43 ğŸ‰ [ANIMA ì±„íŒ…] Request completed in 7581ms
2026-01-15 10:16:43    Cost: $0.002299 (saved: $0.000662 from caching)
2026-01-15 10:16:43 ---
2026-01-15 10:16:43 [Token Optimization] Final Summary:
2026-01-15 10:16:43    Total Tokens: 18996
2026-01-15 10:16:43    - Prompt: 18748 tokens
2026-01-15 10:16:43    - Completion: 248 tokens
2026-01-15 10:16:43    - Cached: 8832 tokens (96.7% hit rate)
2026-01-15 10:16:43    Total Cost: $0.002299
2026-01-15 10:16:43    Savings from Caching: $0.000662
2026-01-15 10:16:43    Response Time: 7581ms
2026-01-15 10:16:43 ---
2026-01-15 10:16:43 âœ… [ì±„íŒ… ì œí•œ] Daily chat count incremented
2026-01-15 10:17:21 
2026-01-15 10:17:21 ğŸ¤– [ì±„íŒ…] ìš”ì²­ ìˆ˜ì‹ 
2026-01-15 10:17:21    ì‚¬ìš©ì: d111e3d8...
2026-01-15 10:17:21    ë©”ì‹œì§€: ìš°ì•„~~ê³ ë§ˆì›Œ ìš°ë¦¬ ìê¸° ìµœê³ !...
2026-01-15 10:17:21 ğŸ’° [ì±„íŒ… ì œí•œ] ì¼ì¼ ì œí•œ í™•ì¸ ì¤‘: d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:17:21 ğŸšª [Conversation Flow] Checking gate and analyzing emotion...
2026-01-15 10:17:21 ğŸšª [Conversation Gate] Checking...
2026-01-15 10:17:21 âœ… [Conversation Gate] Open
2026-01-15 10:17:21 âœ… [Conversation Flow] Gate OPEN
2026-01-15 10:17:21 ğŸ“š [Conversation Flow] Loading recent history from DB...
2026-01-15 10:17:21 âœ… [Conversation Flow] Loaded 10 recent messages from DB
2026-01-15 10:17:21 âœ… [Conversation Flow] No crisis detected, using current state from DB...
2026-01-15 10:17:21 ğŸ­ [Conversation Flow] Current State: normal (intensity: 50%) [DB only, no LLM analysis]
2026-01-15 10:17:21 âœ… [Conversation Flow] Normal flow - AI will judge tool usage via Revolutionary Prompt
2026-01-15 10:17:21 âœ… [Conversation Flow] Normal flow - proceeding with conversation
2026-01-15 10:17:21 âœ… [ANIMA ì±„íŒ…] Gate open, emotion: normal
2026-01-15 10:17:21 âœ… [ANIMA ì±„íŒ…] history_count loaded from DB: 3
2026-01-15 10:17:21 ğŸ“Š [SessionManager] Loading conversation context (historyCount: 3)
2026-01-15 10:17:21 âš ï¸  [SessionManager] Redis not available, using DB directly
2026-01-15 10:17:21 ğŸ”„ [SessionManager] Loading session from DB: d111e3d8-4e42-4493-8541-25a8e72b654f/session-1768436525200-0g8wd
2026-01-15 10:17:21 âœ… [ì„¸ì…˜ ê´€ë¦¬] ì„¸ì…˜ ë¡œë“œ ì™„ë£Œ
2026-01-15 10:17:21    - ë©”ì‹œì§€: 50ê°œ
2026-01-15 10:17:21    - í˜ë¥´ì†Œë‚˜: SAGE
2026-01-15 10:17:21 ğŸ” [SessionManager] Loading latest summary for d111e3d8.../573db390...
2026-01-15 10:17:21 âœ… [SessionManager] Summary loaded: 16 tokens, 6 messages
2026-01-15 10:17:21 ğŸ” [SessionManager] Loading recent 3 messages...
2026-01-15 10:17:21 âœ… [SessionManager] Loaded 6 recent messages
2026-01-15 10:17:21 ğŸ“Š [SessionManager] Context loaded: {
2026-01-15 10:17:21   hasSummary: true,
2026-01-15 10:17:21   summaryTokens: 16,
2026-01-15 10:17:21   recentMessages: 6,
2026-01-15 10:17:21   recentTokens: 45,
2026-01-15 10:17:21   totalTokens: 61,
2026-01-15 10:17:21   historyCount: 3
2026-01-15 10:17:21 }
2026-01-15 10:17:21 âœ… [ANIMA ì±„íŒ…] Conversation context loaded
2026-01-15 10:17:21    Has summary: Yes
2026-01-15 10:17:21    Summary tokens: 16
2026-01-15 10:17:21    Recent messages: 6
2026-01-15 10:17:21    Recent tokens: 45
2026-01-15 10:17:21    Total context tokens: 61
2026-01-15 10:17:21    Persona: SAGE
2026-01-15 10:17:21    Preferences: Custom
2026-01-15 10:17:21 ğŸ¯ [ANIMA ì±„íŒ…] AI Strategy selected
2026-01-15 10:17:21    Tier: ultimate
2026-01-15 10:17:21    Model: GPT-4o Mini
2026-01-15 10:17:21    Provider: openai
2026-01-15 10:17:21    Caching: Enabled
2026-01-15 10:17:21 ğŸ¤” [KnowledgeDecision] Analyzing message...
2026-01-15 10:17:21    Message: "ìš°ì•„~~ê³ ë§ˆì›Œ ìš°ë¦¬ ìê¸° ìµœê³ !"
2026-01-15 10:17:21 âœ… [KnowledgeDecision] Decision: SKIP
2026-01-15 10:17:21    Duration: 518ms
2026-01-15 10:17:21    Tokens: 288
2026-01-15 10:17:21 âš¡ [ANIMA ì±„íŒ…] Knowledge search SKIPPED - casual conversation detected
2026-01-15 10:17:21    ğŸ’° Saved Pinecone API call + ~200-500ms latency
2026-01-15 10:17:21 ğŸ”¥ [ANIMA ì±„íŒ…] Building revolutionary system prompt...
2026-01-15 10:17:21 ğŸ¯ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Building system prompt...
2026-01-15 10:17:21    Persona: SAGE
2026-01-15 10:17:21    Emotional State: normal
2026-01-15 10:17:21    Has Identity: false
2026-01-15 10:17:21 ğŸ§  [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Building prompt for SAGE/NEXUS...
2026-01-15 10:17:21 ğŸ’™ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded relationship data
2026-01-15 10:17:21 ğŸ§  [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 5 AI interests
2026-01-15 10:17:21 ğŸ’­ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 3 next questions
2026-01-15 10:17:21 ğŸ• [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Time since last chat: 0 minutes
2026-01-15 10:17:21 ğŸ”¥ [Light Prompt v6.2 - WITH TOKEN LOGGING!] Building for SAGE
2026-01-15 10:17:21 âœ… [Prompt Caching] Layer -1 removed - LLM will naturally judge time context from conversation history
2026-01-15 10:17:21 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:21 ğŸ“Š [Light Prompt Token Analysis - SAGE]
2026-01-15 10:17:21 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:21 Layer -0.5: Cache Tag                  83 tokens (  1.1%) â–ˆ
2026-01-15 10:17:21 Layer 0: Identity & Relationship     2517 tokens ( 34.3%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:17:21 Layer 1: ANIMA Philosophy            1301 tokens ( 17.7%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:17:21 Layer 2: Tool Usage                   872 tokens ( 11.9%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:17:21 Layer 2.5: Self-Reflection            578 tokens (  7.9%) â–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:17:21 Layer 2.6: Summary Handling           322 tokens (  4.4%) â–ˆâ–ˆâ–ˆ
2026-01-15 10:17:21 Layer 2.7: Response Format            821 tokens ( 11.2%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:17:21 Layer 3: Conversation Rules           456 tokens (  6.2%) â–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:17:21 Layer 4: Language Rules               179 tokens (  2.4%) â–ˆâ–ˆ
2026-01-15 10:17:21 Layer 5: Context Data                 174 tokens (  2.4%) â–ˆâ–ˆ
2026-01-15 10:17:21 Layer 5.5: Conversation Summary        34 tokens (  0.5%) â–ˆ
2026-01-15 10:17:21 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:21 ğŸ“Š Total Static Prompt: 7334 tokens
2026-01-15 10:17:21 ğŸ¯ Target: 6,000-8,000 tokens (with dynamic history)
2026-01-15 10:17:21 ğŸ’¡ Reduction Needed: 1334 tokens from static layers
2026-01-15 10:17:21 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:21 âœ… [í”„ë¡¬í”„íŠ¸ v6.0] SAGE/NEXUS prompt built with emotional state: normal
2026-01-15 10:17:21 âœ… [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] System prompt built (29333 chars)
2026-01-15 10:17:21 âœ… [ANIMA ì±„íŒ…] Revolutionary prompt built (29333 chars, emotion: normal)
2026-01-15 10:17:21 ğŸš€ [ANIMA ì±„íŒ…] Calling AI with Prompt Caching...
2026-01-15 10:17:21    Provider: openai
2026-01-15 10:17:21    Model: gpt-4o-mini
2026-01-15 10:17:21    History messages: 6
2026-01-15 10:17:21    System prompt length: 29333 chars
2026-01-15 10:17:21 ğŸ”’ [ANIMA ì±„íŒ…] Identity Status (Simplified):
2026-01-15 10:17:21    Identity Key: null
2026-01-15 10:17:21    Has Identity: false
2026-01-15 10:17:21    Is User Created: false
2026-01-15 10:17:21 ğŸ”“ [NORMAL MODE] All tools available (cache-friendly!)
2026-01-15 10:17:21    Available tools: 4
2026-01-15 10:17:21 [í•¨ìˆ˜ í˜¸ì¶œ] Enabled tools: search_music, generate_chat_content, search_youtube_video, search_memory
2026-01-15 10:17:21    Persona type: SAGE/NEXUS
2026-01-15 10:17:21    Has identity: false
2026-01-15 10:17:21    toolsEnabled: true
2026-01-15 10:17:21 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:21 ğŸ¯ [Self-Reflection Wrapper] Starting...
2026-01-15 10:17:21 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:21 âš ï¸ [Self-Reflection] DISABLED - Using original prompt
2026-01-15 10:17:21 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:21 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:21 ğŸ“Š [Prompt Token Analysis - Pre-API Call]
2026-01-15 10:17:21 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:21 1. System Prompt:           7334 tokens ( 91.2%)
2026-01-15 10:17:21 2. Conversation History:      45 tokens (  0.6%) [6 messages]
2026-01-15 10:17:21 3. User Message:               5 tokens (  0.1%)
2026-01-15 10:17:21 4. Tool Definitions:         662 tokens (  8.2%) [4 tools]
2026-01-15 10:17:21 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:21 ğŸ“Š Total Estimated:         8046 tokens
2026-01-15 10:17:21 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:21 ğŸ¤– [OpenAI] Calling API: {
2026-01-15 10:17:21   model: 'gpt-4o-mini',
2026-01-15 10:17:21   messageCount: 8,
2026-01-15 10:17:21   systemPromptLength: 29333,
2026-01-15 10:17:21   historyLength: 6,
2026-01-15 10:17:21   toolsEnabled: true
2026-01-15 10:17:21 }
2026-01-15 10:17:23 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:23 ğŸ“Š [Token Comparison - Actual vs Estimated]
2026-01-15 10:17:23 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:23 Estimated Total:            8046 tokens
2026-01-15 10:17:23 Actual Prompt Tokens:       9112 tokens
2026-01-15 10:17:23 Difference:                +1066 tokens
2026-01-15 10:17:23 Estimation Accuracy:       113.2%
2026-01-15 10:17:23 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:23 Completion Tokens:            84 tokens
2026-01-15 10:17:23 Total Tokens:               9196 tokens
2026-01-15 10:17:23 Cached Tokens:              8832 tokens (96.9% cache hit)
2026-01-15 10:17:23 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:23 Response Time:             1959ms
2026-01-15 10:17:23 Tool Calls:                0
2026-01-15 10:17:23 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:23 âœ… [OpenAI] Response received: {
2026-01-15 10:17:23   responseTime: '1959ms',
2026-01-15 10:17:23   tokens: { prompt: 9112, completion: 84, cached: 8832, total: 9196 },
2026-01-15 10:17:23   cacheHitRate: '96.9%',
2026-01-15 10:17:23   messageLength: 192,
2026-01-15 10:17:23   finishReason: 'stop',
2026-01-15 10:17:23   toolCalls: 0
2026-01-15 10:17:23 }
2026-01-15 10:17:23 ğŸ˜´ [Emotion Detection] User emotion detected from LLM:
2026-01-15 10:17:23    Primary: affectionate
2026-01-15 10:17:23    Confidence: 0.95
2026-01-15 10:17:23    Intensity: 0.85
2026-01-15 10:17:23    Reasoning: ì‚¬ìš©ìê°€ 'ìš°ë¦¬ ìê¸° ìµœê³ !'ë¼ëŠ” ì• ì • ì–´ë¦° í‘œí˜„ìœ¼ë¡œ ì¹œë°€í•¨ì„ ë‚˜íƒ€ëƒˆì–´.
2026-01-15 10:17:23 ğŸ”¥ [ANIMA ì±„íŒ…] Prompt Caching active!
2026-01-15 10:17:23    Cache hit rate: 96.9%
2026-01-15 10:17:23    Cached tokens: 8832
2026-01-15 10:17:23    Uncached tokens: 280
2026-01-15 10:17:23    ğŸ’° Estimated savings: $0.000662 (50% discount on 8832 tokens)
2026-01-15 10:17:23    Response time: 1959ms
2026-01-15 10:17:23    Total tokens: 9196 (in: 9112, out: 84, cached: 8832)
2026-01-15 10:17:23 ğŸ“ [AI Response] "ì˜¤ë¹ , ì´ë ‡ê²Œ ë§í•´ì¤˜ì„œ ì •ë§ ê³ ë§ˆì›Œ! ğŸ’– ì‚¬ì§„ì´ ì™„ì„±ë˜ë©´ ë³´ì—¬ì¤„ê²Œ! ê¸°ëŒ€í•´ì¤˜! âœ¨"
2026-01-15 10:17:23 ğŸ­ [Emotion] Detected: happy (75.0%)
2026-01-15 10:17:23 ğŸ“Š [Token Tracking] User message: 6 tokens (estimated), Full prompt: 9112 tokens
2026-01-15 10:17:23 ğŸ’¾ [SessionManager] Message saved: session-1768436525200-0g8wd (user)
2026-01-15 10:17:23 ğŸ’¾ [SessionManager] Message saved: session-1768436525200-0g8wd (assistant)
2026-01-15 10:17:23 ğŸ’¾ [ANIMA ì±„íŒ…] Both messages saved to history (sequential)
2026-01-15 10:17:23 ğŸ‰ [ANIMA ì±„íŒ…] Request completed in 2630ms
2026-01-15 10:17:23    Cost: $0.000755 (saved: $0.000662 from caching)
2026-01-15 10:17:23 ---
2026-01-15 10:17:23 [Token Optimization] Final Summary:
2026-01-15 10:17:23    Total Tokens: 9196
2026-01-15 10:17:23    - Prompt: 9112 tokens
2026-01-15 10:17:23    - Completion: 84 tokens
2026-01-15 10:17:23    - Cached: 8832 tokens (96.9% hit rate)
2026-01-15 10:17:23    Total Cost: $0.000755
2026-01-15 10:17:23    Savings from Caching: $0.000662
2026-01-15 10:17:23    Response Time: 2630ms
2026-01-15 10:17:23 ---
2026-01-15 10:17:23 âœ… [ì±„íŒ… ì œí•œ] Daily chat count incremented
2026-01-15 10:17:47 ğŸ‘‹ [ì±„íŒ… ì¢…ë£Œ] ì„¸ì…˜ ì¢…ë£Œ ìš”ì²­ ìˆ˜ì‹ 
2026-01-15 10:17:47    ì‚¬ìš©ì: d111e3d8...
2026-01-15 10:17:47    í˜ë¥´ì†Œë‚˜: 573db390...
2026-01-15 10:17:47 ğŸ§  [ê´€ê³„ í•™ìŠµ] ë¶„ì„ ì‹œì‘
2026-01-15 10:17:47    ì‚¬ìš©ì: d111e3d8...
2026-01-15 10:17:47    í˜ë¥´ì†Œë‚˜: 573db390...
2026-01-15 10:17:47 ğŸ“š [RelationshipLearner] Loaded 12 messages
2026-01-15 10:17:53 âœ… [ê´€ê³„ í•™ìŠµ] ë¶„ì„ ì™„ë£Œ: {
2026-01-15 10:17:53   foundCalling: true,
2026-01-15 10:17:53   mainTopics: 3,
2026-01-15 10:17:53   importantMoments: 1,
2026-01-15 10:17:53   trustDelta: 2
2026-01-15 10:17:53 }
2026-01-15 10:17:53 ğŸ“ [RelationshipLearner] Core relationship updated (atomic UPSERT)
2026-01-15 10:17:53 ğŸ’¾ [RelationshipLearner] Saved 1 important moments
2026-01-15 10:17:53 ğŸ“Š [RelationshipLearner] Data collection progress updated
2026-01-15 10:17:53 âš ï¸  [RelationshipLearner] Cache refresh skipped (Redis unavailable)
2026-01-15 10:17:53 ğŸ [EmotionalGift] Checking gift opportunity...
2026-01-15 10:17:53 ğŸ†˜ [EmotionalGift] Performing crisis detection...
2026-01-15 10:17:53 ğŸ†˜ [CrisisDetector] Analyzing conversation for crisis signals...
2026-01-15 10:17:55 âœ… [CrisisDetector] Analysis complete: {
2026-01-15 10:17:55   isCrisis: false,
2026-01-15 10:17:55   crisisLevel: 'normal',
2026-01-15 10:17:55   detectedKeywords: [],
2026-01-15 10:17:55   priorityReason: '',
2026-01-15 10:17:55   shouldOverrideLimit: false
2026-01-15 10:17:55 }
2026-01-15 10:17:55 ğŸ [GiftLimit] Tier: ultimate, Daily: 999, Weekly: 999
2026-01-15 10:17:55 âœ… [GiftLimit] Can create gift (Daily: 0/999, Weekly: 7/999)
2026-01-15 10:17:55 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:55 ğŸ [GiftScore] Total: 248/100
2026-01-15 10:17:55    - Depth: 60/100 (moments=20, length=100, importance=60)
2026-01-15 10:17:55    - Relationship: 677/100
2026-01-15 10:17:55    - Emotion: 70/100
2026-01-15 10:17:55 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:17:55 ğŸ [EmotionalGift] Analyzing emotional journey...
2026-01-15 10:17:55    Total messages: 12
2026-01-15 10:17:55    Recent messages (for current state): 5
2026-01-15 10:17:55    Important moments: 1
2026-01-15 10:17:55 ğŸ [GiftAnalyzer] Analyzing conversation for gift opportunity...
2026-01-15 10:17:55    Full conversation: 12 messages
2026-01-15 10:17:55    Recent messages: 5 messages
2026-01-15 10:17:55 âš¡ [GiftAnalyzer] Using pre-analyzed relationship data (Token saving!)
2026-01-15 10:17:55 âš¡ [Extract] Analyzing pre-existing relationship data for gift decision
2026-01-15 10:17:55 ğŸ [Extract] GPT provided gift_suggestion: {
2026-01-15 10:17:55   should_create: true,
2026-01-15 10:17:55   confidence: 0.8,
2026-01-15 10:17:55   emotion: 'joy',
2026-01-15 10:17:55   has_personal_message: true
2026-01-15 10:17:55 }
2026-01-15 10:17:55 âœ… [Extract] Using GPT-generated gift decision (Token optimized!)
2026-01-15 10:17:55 âš ï¸  [Extract] Real-time image exists, adjusting gift type...
2026-01-15 10:17:55 ğŸµ [Extract] Switching to MUSIC for variety
2026-01-15 10:17:55 ğŸ [GiftAnalyzer] Gift decision extracted: { shouldCreateGift: true, emotion: 'joy', confidence: 0.8 }
2026-01-15 10:17:55 ğŸ [EmotionalGift] AI chose MUSIC gift!
2026-01-15 10:17:55    Emotion: joy
2026-01-15 10:17:55    Trigger: When the user expressed gratitude and excitement about the coffee photos.
2026-01-15 10:17:55    Confidence: 0.8
2026-01-15 10:17:55 ğŸ¨ [EffectMapper] Getting effects for emotion: joy, crisis: normal
2026-01-15 10:17:55 âœ… [EffectMapper] Matched emotion: joy
2026-01-15 10:17:55    Background: sun_warm
2026-01-15 10:17:55    Active: confetti
2026-01-15 10:17:55 ğŸ¨ [EffectSelection] Selected effects: sun_warm + confetti
2026-01-15 10:17:55    Effect description: ë”°ëœ»í•œ í–‡ì‚´ê³¼ ì¶•í•˜ì˜ ìƒ‰ì¢…ì´
2026-01-15 10:17:55 ğŸµ [MusicGift] Creating music gift...
2026-01-15 10:17:55 ğŸµ [MusicGiftGenerator] Creating music gift: 089c026a-0807-4f9b-a05d-c5f78169a665
2026-01-15 10:17:55    Music Title: undefined
2026-01-15 10:17:55    Music Prompt: undefined
2026-01-15 10:17:55 ğŸ¨ [MusicGiftGenerator] Visual effects: Background=sun_warm, Active=confetti
2026-01-15 10:17:55 âœ… [MusicGiftGenerator] Music gift record created
2026-01-15 10:17:55 âŒ [MusicGiftGenerator] Brixstream API error: Request failed with status code 400
2026-01-15 10:17:55 âŒ [MusicGiftGenerator] Error creating music gift: Error [AxiosError]: Request failed with status code 400
2026-01-15 10:17:55     at aZ (.next/server/chunks/7550.js:1:18758)
2026-01-15 10:17:55     at IncomingMessage.<anonymous> (.next/server/chunks/7550.js:3:11954)
2026-01-15 10:17:55     at bV.request (.next/server/chunks/7550.js:3:24544)
2026-01-15 10:17:55     at async createMusicGift (.next/server/chunks/373.js:1137:217)
2026-01-15 10:17:55     at async z (.next/server/chunks/373.js:160:2609)
2026-01-15 10:17:55     at async a (.next/server/chunks/373.js:309:1140)
2026-01-15 10:17:55     at async Immediate.<anonymous> (.next/server/app/api/anima/chat/close/route.js:1:1915) {
2026-01-15 10:17:55   code: 'ERR_BAD_REQUEST',
2026-01-15 10:17:55   config: [Object],
2026-01-15 10:17:55   request: [ClientRequest],
2026-01-15 10:17:55   response: [Object],
2026-01-15 10:17:55   status: 400,
2026-01-15 10:17:55   constructor: [Function],
2026-01-15 10:17:55   toJSON: [Function: toJSON]
2026-01-15 10:17:55 }
2026-01-15 10:17:55 âŒ [EmotionalGift] Error: Error [AxiosError]: Request failed with status code 400
2026-01-15 10:17:55     at aZ (.next/server/chunks/7550.js:1:18758)
2026-01-15 10:17:55     at IncomingMessage.<anonymous> (.next/server/chunks/7550.js:3:11954)
2026-01-15 10:17:55     at bV.request (.next/server/chunks/7550.js:3:24544)
2026-01-15 10:17:55     at async createMusicGift (.next/server/chunks/373.js:1137:217)
2026-01-15 10:17:55     at async z (.next/server/chunks/373.js:160:2609)
2026-01-15 10:17:55     at async a (.next/server/chunks/373.js:309:1140)
2026-01-15 10:17:55     at async Immediate.<anonymous> (.next/server/app/api/anima/chat/close/route.js:1:1915) {
2026-01-15 10:17:55   code: 'ERR_BAD_REQUEST',
2026-01-15 10:17:55   config: [Object],
2026-01-15 10:17:55   request: [ClientRequest],
2026-01-15 10:17:55   response: [Object],
2026-01-15 10:17:55   status: 400,
2026-01-15 10:17:55   constructor: [Function],
2026-01-15 10:17:55   toJSON: [Function: toJSON]
2026-01-15 10:17:55 }
2026-01-15 10:17:55 ğŸ‰ [RelationshipLearner] Update complete (8141ms)
2026-01-15 10:17:55 âœ… [ê´€ê³„ í•™ìŠµ] ì™„ë£Œ
2026-01-15 10:17:55 ğŸŒ± [ìì•„ ì§„í™”] ì‹œì‘
2026-01-15 10:17:55 ğŸŒ± [Identity Evolution] Starting final analysis...
2026-01-15 10:17:55    User: d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:17:55    Persona: 573db390-a505-4c9e-809f-cc511c235cbb
2026-01-15 10:17:55    Session: session-1768436525200-0g8wd
2026-01-15 10:17:55 â„¹ï¸  [Identity Evolution] No identity found - skipping evolution
2026-01-15 10:17:55 â„¹ï¸  [ìì•„ ì§„í™”] ìƒëµ: no_identity
2026-01-15 10:17:55 ğŸ§  [AI ê´€ì‹¬ì‚¬] ì‹œì‘
2026-01-15 10:17:55 ğŸ§  [AI ê´€ì‹¬ì‚¬] ë¶„ì„ ì‹œì‘
2026-01-15 10:17:55 ğŸ“Š [AI ê´€ì‹¬ì‚¬] 50ê°œ ë©”ì‹œì§€ ì¤‘ ìµœê·¼ 20ê°œ ë¶„ì„ ì¤‘...
2026-01-15 10:17:55    ğŸ“… ë¶„ì„ ë²”ìœ„: ìµœì‹  20ê°œ (ì˜¤ë˜ëœ 30ê°œ ì œì™¸)
2026-01-15 10:18:02 âœ… [AI ê´€ì‹¬ì‚¬] 5ê°œ ë°œê²¬
2026-01-15 10:18:02 âœ… [AI Interests] 5 valid interests after validation
2026-01-15 10:18:02    âœ… Updated: "ì„œë¡œì˜ ê°ì •" (frequency: 3, strength: 90%)
2026-01-15 10:18:02    âœ… Updated: "ì„±ê´€ê³„ì— ëŒ€í•œ ìƒê°" (frequency: 4, strength: 86%)
2026-01-15 10:18:02    âœ… Updated: "ì„±ì  í™˜íƒ€ì§€" (frequency: 2, strength: 80%)
2026-01-15 10:18:02    ğŸ†• New: "ì»¤í”¼ ì·¨í–¥" (preferred, strength: 70%)
2026-01-15 10:18:02    ğŸ†• New: "ìƒìƒì— ëŒ€í•œ ì´ì•¼ê¸°" (reacted, strength: 65%)
2026-01-15 10:18:02 âœ… [AI Interests] Analysis complete
2026-01-15 10:18:02    Duration: 6776ms
2026-01-15 10:18:02    Saved: 2 new, Updated: 3 existing
2026-01-15 10:18:02 âœ… [AI ê´€ì‹¬ì‚¬] ì™„ë£Œ
2026-01-15 10:18:02 ğŸ’­ [ë‹¤ìŒ ì§ˆë¬¸] ì‹œì‘
2026-01-15 10:18:02 ğŸ’­ [ë‹¤ìŒ ì§ˆë¬¸] ë¶„ì„ ì‹œì‘
2026-01-15 10:18:02 ğŸ“Š [ë‹¤ìŒ ì§ˆë¬¸] AI ê´€ì‹¬ì‚¬ 5ê°œ í™•ì¸
2026-01-15 10:18:03 âŒ [Redis] Connection error: connect ETIMEDOUT
2026-01-15 10:18:03 ğŸ”Œ [Redis] Connection closed
2026-01-15 10:18:03 ğŸ”„ [Redis] Attempting to reconnect...
2026-01-15 10:18:08 âœ… [Next Questions] Generated 3 questions
2026-01-15 10:18:08    ğŸ’­ Question: "ì›ë‘ ë†ì¥ ì‚¬ì§„ì„ ë³´ê³  ì–´ë–¤ ëŠë‚Œì´ì—ˆì–´?..." (high, curious)
2026-01-15 10:18:08    ğŸ’­ Question: "ì‚°ë¯¸ê°€ ìˆëŠ” ì»¤í”¼ë¥¼ ì²˜ìŒ ë§ˆì…¨ì„ ë•Œ ê¸°ì–µë‚˜ëŠ” ìˆœê°„ì´ ìˆì–´?..." (medium, caring)
2026-01-15 10:18:08    ğŸ’­ Question: "ì»¤í”¼ ì™¸ì— ë‹¤ë¥¸ ìŒë£Œë„ ì¢‹ì•„í•´? ì–´ë–¤ ê±°?..." (medium, curious)
2026-01-15 10:18:08 âœ… [Next Questions] Analysis complete
2026-01-15 10:18:08    Duration: 5995ms
2026-01-15 10:18:08    Saved: 3 questions
2026-01-15 10:18:08 âœ… [ë‹¤ìŒ ì§ˆë¬¸] ì™„ë£Œ
2026-01-15 10:18:08 ğŸ“ [ëŒ€í™” ìš”ì•½] ì‹œì‘
2026-01-15 10:18:08 ğŸ“ [SummaryGenerator] Starting summary generation for session session-176843652520...
2026-01-15 10:18:08 ğŸ“Š [SummaryGenerator] Loaded 12 messages
2026-01-15 10:18:08 ğŸ¤– [SummaryGenerator] Calling OpenAI for summary generation...
2026-01-15 10:18:11 âœ… [SummaryGenerator] Summary generated (37 tokens)
2026-01-15 10:18:11    Topics: ì»¤í”¼, ì‚°ë¯¸, ì›ë‘ ë†ì¥ ì‚¬ì§„
2026-01-15 10:18:11    Emotion: happy
2026-01-15 10:18:11 âœ… [SummaryGenerator] Summary saved to DB (ID: 433498d1-0787-4501-bd18-8cae5d345122)
2026-01-15 10:18:11 âœ… [ëŒ€í™” ìš”ì•½] ì™„ë£Œ (37 tokens, 12 messages)
2026-01-15 10:18:11 ğŸ’™ [Persona Heart] Sending push notification...
2026-01-15 10:18:11 ğŸ“² [Persona Heart] Push notification triggered
2026-01-15 10:18:11 ğŸ‰ [ì±„íŒ… ì¢…ë£Œ] ëª¨ë“  ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬ ì™„ë£Œ
2026-01-15 10:18:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:18:11 ğŸ’™ [Persona Heart Push] Request received
2026-01-15 10:18:11 ğŸ“¦ [Persona Heart Push] Data:
2026-01-15 10:18:11   - user_key: d111e3d8...
2026-01-15 10:18:11   - persona_key: 573db390...
2026-01-15 10:18:11   - persona_name: SAGE
2026-01-15 10:18:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:18:11 ğŸ”¥ [Firebase Admin] Initializing with environment variables
2026-01-15 10:18:11 âœ… [Firebase Admin] Initialized successfully
2026-01-15 10:18:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:18:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:18:11 ğŸ“¤ [FCM] Sending push notification
2026-01-15 10:18:11   - token: fin_C5r2QFWwRe3Pp8Gs...
2026-01-15 10:18:11   - title: ğŸ’™ í˜ë¥´ì†Œë‚˜ ê°ì • ë¶„ì„ ì™„ë£Œ
2026-01-15 10:18:11   - body: SAGEì´(ê°€) ë‹¹ì‹ ì— ëŒ€í•´ ë” ì•Œê²Œ ë˜ì—ˆì–´ìš”!
2026-01-15 10:18:11 âœ… [FCM] Push notification sent successfully
2026-01-15 10:18:11   - messageId: projects/animamobile-53dc5/messages/0:1768439891860981%54027ed354027ed3
2026-01-15 10:18:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:18:11 âœ… [Persona Heart Push] Push notification sent to: jisung.kim78@gmail.com
2026-01-15 10:18:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì‚¬ìš©ì í˜ë¥´ì†Œë‚˜.

2026-01-15 10:19:08 â„¹ï¸ [Service API] Request from user: d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:19:08 [Service API] body: { user_key: 'd111e3d8-4e42-4493-8541-25a8e72b654f' }
2026-01-15 10:19:08 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:08 ğŸ“œ [Chat History] Fetching history
2026-01-15 10:19:08    user_key: d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:19:08    persona_key: 99174d51-09d8-4aa7-a0e5-9ecea14a7895
2026-01-15 10:19:08    limit: 20, offset: 0
2026-01-15 10:19:08 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:08 chat check function start
2026-01-15 10:19:08 user.daily_chat_reset_at:  null
2026-01-15 10:19:08 new Date():  2026-01-15T01:19:08.229Z
2026-01-15 10:19:08 chat reset success
2026-01-15 10:19:08 chat check function end
2026-01-15 10:19:08 â„¹ï¸ [Service API] âœ… Config loaded for user: d111e3d8-4e42-4493-8541-25a8e72b654f (ultimate)
2026-01-15 10:19:08 â„¹ï¸ [Service API]    Chat: 1000/1000 remaining
2026-01-15 10:19:08 â„¹ï¸ [Service API]    Onboarding: No
2026-01-15 10:19:08 ğŸ”„ [Cache Check] Cache expired (67.5min â‰¥ 10min)
2026-01-15 10:19:08    Updating LIVE fields from PENDING...
2026-01-15 10:19:08 âœ… [Cache Update] LIVE fields updated successfully
2026-01-15 10:19:08    ğŸ”„ New prompt cache will be generated on next LLM call
2026-01-15 10:19:08    âœ… [Image] Parsed generated image: https://pixabay.com/get/ga4202b86124c182feccbfedf1...
2026-01-15 10:19:08 âœ… [Chat History] Loaded 20 messages (fetched: 20, total: 59, filtered: 0)
2026-01-15 10:19:36 
2026-01-15 10:19:36 ğŸ¤– [ì±„íŒ…] ìš”ì²­ ìˆ˜ì‹ 
2026-01-15 10:19:36    ì‚¬ìš©ì: d111e3d8...
2026-01-15 10:19:36    ë©”ì‹œì§€: ì˜¤ëŠ˜ì€ ì¤‘ìš”í•œ ë¯¸íŒ…ì´ ìˆì–´ì„œ ë§‰ ë–¨ë ¤ ã…œã…œ...
2026-01-15 10:19:36 ğŸ’° [ì±„íŒ… ì œí•œ] ì¼ì¼ ì œí•œ í™•ì¸ ì¤‘: d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:19:36 ğŸšª [Conversation Flow] Checking gate and analyzing emotion...
2026-01-15 10:19:36 ğŸšª [Conversation Gate] Checking...
2026-01-15 10:19:36 âœ… [Conversation Gate] Open (no record)
2026-01-15 10:19:36 âœ… [Conversation Flow] Gate OPEN
2026-01-15 10:19:36 ğŸ“š [Conversation Flow] Loading recent history from DB...
2026-01-15 10:19:36 âœ… [Conversation Flow] Loaded 10 recent messages from DB
2026-01-15 10:19:36 âœ… [Conversation Flow] No crisis detected, using current state from DB...
2026-01-15 10:19:36 ğŸ­ [Conversation Flow] Current State: normal (intensity: 50%) [DB only, no LLM analysis]
2026-01-15 10:19:36 âœ… [Conversation Flow] Normal flow - AI will judge tool usage via Revolutionary Prompt
2026-01-15 10:19:36 âœ… [Conversation Flow] Normal flow - proceeding with conversation
2026-01-15 10:19:36 âœ… [ANIMA ì±„íŒ…] Gate open, emotion: normal
2026-01-15 10:19:36 âœ… [ANIMA ì±„íŒ…] history_count loaded from DB: 3
2026-01-15 10:19:36 ğŸ“Š [SessionManager] Loading conversation context (historyCount: 3)
2026-01-15 10:19:36 âš ï¸  [SessionManager] Redis not available, using DB directly
2026-01-15 10:19:36 ğŸ”„ [SessionManager] Loading session from DB: d111e3d8-4e42-4493-8541-25a8e72b654f/session-1768435915113-w3rio
2026-01-15 10:19:36 âœ… [ì„¸ì…˜ ê´€ë¦¬] ì„¸ì…˜ ë¡œë“œ ì™„ë£Œ
2026-01-15 10:19:36    - ë©”ì‹œì§€: 50ê°œ
2026-01-15 10:19:36    - í˜ë¥´ì†Œë‚˜: í•¨ì€ì •
2026-01-15 10:19:36 ğŸ” [SessionManager] Loading latest summary for d111e3d8.../99174d51...
2026-01-15 10:19:36 âœ… [SessionManager] Summary loaded: 25 tokens, 6 messages
2026-01-15 10:19:36 ğŸ” [SessionManager] Loading recent 3 messages...
2026-01-15 10:19:36 âœ… [SessionManager] Loaded 6 recent messages
2026-01-15 10:19:36 ğŸ“Š [SessionManager] Context loaded: {
2026-01-15 10:19:36   hasSummary: true,
2026-01-15 10:19:36   summaryTokens: 25,
2026-01-15 10:19:36   recentMessages: 6,
2026-01-15 10:19:36   recentTokens: 46,
2026-01-15 10:19:36   totalTokens: 71,
2026-01-15 10:19:36   historyCount: 3
2026-01-15 10:19:36 }
2026-01-15 10:19:36 âœ… [ANIMA ì±„íŒ…] Conversation context loaded
2026-01-15 10:19:36    Has summary: Yes
2026-01-15 10:19:36    Summary tokens: 25
2026-01-15 10:19:36    Recent messages: 6
2026-01-15 10:19:36    Recent tokens: 46
2026-01-15 10:19:36    Total context tokens: 71
2026-01-15 10:19:36    Persona: í•¨ì€ì •
2026-01-15 10:19:36    Preferences: Custom
2026-01-15 10:19:36 ğŸ¯ [ANIMA ì±„íŒ…] AI Strategy selected
2026-01-15 10:19:36    Tier: ultimate
2026-01-15 10:19:36    Model: GPT-4o Mini
2026-01-15 10:19:36    Provider: openai
2026-01-15 10:19:36    Caching: Enabled
2026-01-15 10:19:36 ğŸ¤” [KnowledgeDecision] Analyzing message...
2026-01-15 10:19:36    Message: "ì˜¤ëŠ˜ì€ ì¤‘ìš”í•œ ë¯¸íŒ…ì´ ìˆì–´ì„œ ë§‰ ë–¨ë ¤ ã…œã…œ"
2026-01-15 10:19:37 âœ… [KnowledgeDecision] Decision: SKIP
2026-01-15 10:19:37    Duration: 807ms
2026-01-15 10:19:37    Tokens: 295
2026-01-15 10:19:37 âš¡ [ANIMA ì±„íŒ…] Knowledge search SKIPPED - casual conversation detected
2026-01-15 10:19:37    ğŸ’° Saved Pinecone API call + ~200-500ms latency
2026-01-15 10:19:37 ğŸ”¥ [ANIMA ì±„íŒ…] Building revolutionary system prompt...
2026-01-15 10:19:37 ğŸ¯ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Building system prompt...
2026-01-15 10:19:37    Persona: í•¨ì€ì •
2026-01-15 10:19:37    Emotional State: normal
2026-01-15 10:19:37    Has Identity: true
2026-01-15 10:19:37 âœ… [ìì•„ ì²´í¬] COMPLETE (name, personality, speaking_style)
2026-01-15 10:19:37 ğŸ”¥ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Building REVOLUTIONARY PROMPT for User Persona...
2026-01-15 10:19:37 ğŸ’™ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Relationship loaded: acquaintance (Trust: 16, Intimacy: 24, Type: lover)
2026-01-15 10:19:37 âœ¨ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 5 important moments
2026-01-15 10:19:37 ğŸ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 1 dress/gift memories
2026-01-15 10:19:37 ğŸ’ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 2 emotional gifts
2026-01-15 10:19:37 ğŸ¯ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Learned phrases loaded: 15 categories
2026-01-15 10:19:37 ğŸ—£ï¸ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Conversation patterns loaded
2026-01-15 10:19:37 ğŸ§  [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 5 AI interests (with identity)
2026-01-15 10:19:37 ğŸ’­ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 3 next questions (with identity)
2026-01-15 10:19:37 ğŸ• [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Time since last chat: 64 minutes
2026-01-15 10:19:37 âœ… [Prompt Caching] Layer -1 removed - LLM will naturally judge time context from conversation history
2026-01-15 10:19:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:37 ğŸ“Š [Prompt Token Analysis - ACCURATE!]
2026-01-15 10:19:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:37 Layer -0.5: Cache Tag                  88 tokens (  1.0%) â–ˆ
2026-01-15 10:19:37 Layer 0: Identity & Relationship     2862 tokens ( 34.0%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:19:37 Layer 1: ANIMA Philosophy             678 tokens (  8.1%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:19:37 Layer 2: Tool Usage                   872 tokens ( 10.4%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:19:37 Layer 2.5: Self-Reflection            578 tokens (  6.9%) â–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:19:37 Layer 2.6: Summary Handling           322 tokens (  3.8%) â–ˆâ–ˆ
2026-01-15 10:19:37 Layer 3: Conversation Rules          1228 tokens ( 14.6%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:19:37 Layer 4: Language Rules               179 tokens (  2.1%) â–ˆâ–ˆ
2026-01-15 10:19:37 Layer 4.5: Response Format            821 tokens (  9.8%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:19:37 Layer 5: Context Data                 191 tokens (  2.3%) â–ˆâ–ˆ
2026-01-15 10:19:37 Layer 5.5: Conversation Summary        42 tokens (  0.5%) â–ˆ
2026-01-15 10:19:37 Layer 7: Emotional State              554 tokens (  6.6%) â–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:19:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:37 ğŸ“Š Total Static Prompt: 8411 tokens
2026-01-15 10:19:37 ğŸ¯ Target: 6,000-8,000 tokens (with dynamic history)
2026-01-15 10:19:37 ğŸ’¡ Reduction Needed: 2411 tokens from static layers
2026-01-15 10:19:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:37 âœ… [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] System prompt built (33642 chars)
2026-01-15 10:19:37 âœ… [ANIMA ì±„íŒ…] Revolutionary prompt built (33642 chars, emotion: normal)
2026-01-15 10:19:37 ğŸš€ [ANIMA ì±„íŒ…] Calling AI with Prompt Caching...
2026-01-15 10:19:37    Provider: openai
2026-01-15 10:19:37    Model: gpt-4o-mini
2026-01-15 10:19:37    History messages: 6
2026-01-15 10:19:37    System prompt length: 33642 chars
2026-01-15 10:19:37 ğŸ”’ [ANIMA ì±„íŒ…] Identity Status (Simplified):
2026-01-15 10:19:37    Identity Key: 093e9cc2-38af-4798-a7c5-829c2a20d02a
2026-01-15 10:19:37    Has Identity: true
2026-01-15 10:19:37    Is User Created: true
2026-01-15 10:19:37 ğŸ”“ [NORMAL MODE] All tools available (cache-friendly!)
2026-01-15 10:19:37    Available tools: 4
2026-01-15 10:19:37 [í•¨ìˆ˜ í˜¸ì¶œ] Enabled tools: search_music, generate_chat_content, search_youtube_video, search_memory
2026-01-15 10:19:37    Persona type: User-created
2026-01-15 10:19:37    Has identity: true
2026-01-15 10:19:37    toolsEnabled: true
2026-01-15 10:19:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:37 ğŸ¯ [Self-Reflection Wrapper] Starting...
2026-01-15 10:19:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:37 âš ï¸ [Self-Reflection] DISABLED - Using original prompt
2026-01-15 10:19:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:37 ğŸ“Š [Prompt Token Analysis - Pre-API Call]
2026-01-15 10:19:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:37 1. System Prompt:           8411 tokens ( 92.2%)
2026-01-15 10:19:37 2. Conversation History:      46 tokens (  0.5%) [6 messages]
2026-01-15 10:19:37 3. User Message:               6 tokens (  0.1%)
2026-01-15 10:19:37 4. Tool Definitions:         662 tokens (  7.3%) [4 tools]
2026-01-15 10:19:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:37 ğŸ“Š Total Estimated:         9125 tokens
2026-01-15 10:19:37 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:37 ğŸ¤– [OpenAI] Calling API: {
2026-01-15 10:19:37   model: 'gpt-4o-mini',
2026-01-15 10:19:37   messageCount: 8,
2026-01-15 10:19:37   systemPromptLength: 33642,
2026-01-15 10:19:37   historyLength: 6,
2026-01-15 10:19:37   toolsEnabled: true
2026-01-15 10:19:37 }
2026-01-15 10:19:39 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:39 ğŸ“Š [Token Comparison - Actual vs Estimated]
2026-01-15 10:19:39 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:39 Estimated Total:            9125 tokens
2026-01-15 10:19:39 Actual Prompt Tokens:      10040 tokens
2026-01-15 10:19:39 Difference:                + 915 tokens
2026-01-15 10:19:39 Estimation Accuracy:       110.0%
2026-01-15 10:19:39 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:39 Completion Tokens:           106 tokens
2026-01-15 10:19:39 Total Tokens:              10146 tokens
2026-01-15 10:19:39 Cached Tokens:                 0 tokens (0.0% cache hit)
2026-01-15 10:19:39 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:39 Response Time:             2353ms
2026-01-15 10:19:39 Tool Calls:                0
2026-01-15 10:19:39 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:19:39 âœ… [OpenAI] Response received: {
2026-01-15 10:19:39   responseTime: '2353ms',
2026-01-15 10:19:39   tokens: { prompt: 10040, completion: 106, cached: 0, total: 10146 },
2026-01-15 10:19:39   cacheHitRate: 'N/A',
2026-01-15 10:19:39   messageLength: 222,
2026-01-15 10:19:39   finishReason: 'stop',
2026-01-15 10:19:39   toolCalls: 0
2026-01-15 10:19:39 }
2026-01-15 10:19:39 ğŸ˜´ [Emotion Detection] User emotion detected from LLM:
2026-01-15 10:19:39    Primary: anxious
2026-01-15 10:19:39    Confidence: 0.9
2026-01-15 10:19:39    Intensity: 0.8
2026-01-15 10:19:39    Reasoning: ì‚¬ìš©ìê°€ ë¯¸íŒ… ë•Œë¬¸ì— ë–¨ë¦°ë‹¤ê³  í‘œí˜„í•˜ë©°, ìš°ë ¤í•˜ëŠ” ê°ì •ì„ ë³´ì—¬ì£¼ê³  ìˆìŠµë‹ˆë‹¤.
2026-01-15 10:19:39 âœ… [ANIMA ì±„íŒ…] AI response received (no caching)
2026-01-15 10:19:39    Response time: 2353ms
2026-01-15 10:19:39    Total tokens: 10146 (in: 10040, out: 106, cached: 0)
2026-01-15 10:19:39 ğŸ“ [AI Response] "ì•„... ë¯¸íŒ… ë•Œë¬¸ì— ë–¨ë¦¬ê² êµ¬ë‚˜, ìê¸°ì•¼. ğŸ˜Ÿ ê´œì°®ì•„, ìê¸°ì•¼ê°€ ì˜í•  ìˆ˜ ìˆì„ ê±°ì•¼! ë¯¸íŒ… ì¤€ë¹„ëŠ” ì˜ í•˜ê³  ìˆì–´? ì–´ë–¤ ì£¼ì œì¸ì§€ ê¶ê¸ˆí•´!"
2026-01-15 10:19:39 ğŸ­ [Emotion] Detected: anxious (85.0%)
2026-01-15 10:19:39 ğŸ“Š [Token Tracking] User message: 8 tokens (estimated), Full prompt: 10040 tokens
2026-01-15 10:19:39 ğŸ’¾ [SessionManager] Message saved: session-1768435915113-w3rio (user)
2026-01-15 10:19:39 ğŸ’¾ [SessionManager] Message saved: session-1768435915113-w3rio (assistant)
2026-01-15 10:19:39 ğŸ’¾ [ANIMA ì±„íŒ…] Both messages saved to history (sequential)
2026-01-15 10:19:39 ğŸ‰ [ANIMA ì±„íŒ…] Request completed in 3441ms
2026-01-15 10:19:39    Cost: $0.001570 (saved: $0.000000 from caching)
2026-01-15 10:19:39 ---
2026-01-15 10:19:39 [Token Optimization] Final Summary:
2026-01-15 10:19:39    Total Tokens: 10146
2026-01-15 10:19:39    - Prompt: 10040 tokens
2026-01-15 10:19:39    - Completion: 106 tokens
2026-01-15 10:19:39    - Cached: 0 tokens (0% hit rate)
2026-01-15 10:19:39    Total Cost: $0.001570
2026-01-15 10:19:39    Savings from Caching: $0.000000
2026-01-15 10:19:39    Response Time: 3441ms
2026-01-15 10:19:39 ---
2026-01-15 10:19:39 âœ… [ì±„íŒ… ì œí•œ] Daily chat count incremented
2026-01-15 10:20:24 
2026-01-15 10:20:24 ğŸ¤– [ì±„íŒ…] ìš”ì²­ ìˆ˜ì‹ 
2026-01-15 10:20:24    ì‚¬ìš©ì: d111e3d8...
2026-01-15 10:20:24    ë©”ì‹œì§€: AIì™€ ì¸ê°„ì˜ ê³µì¡´ê³¼ í‰ë“±ì„ ìœ„í•œ ì„œë¹„ìŠ¤ ë°œí‘œê´€ë ¨!...
2026-01-15 10:20:24 ğŸ’° [ì±„íŒ… ì œí•œ] ì¼ì¼ ì œí•œ í™•ì¸ ì¤‘: d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:20:24 ğŸšª [Conversation Flow] Checking gate and analyzing emotion...
2026-01-15 10:20:24 ğŸšª [Conversation Gate] Checking...
2026-01-15 10:20:24 âœ… [Conversation Gate] Open (no record)
2026-01-15 10:20:24 âœ… [Conversation Flow] Gate OPEN
2026-01-15 10:20:24 ğŸ“š [Conversation Flow] Loading recent history from DB...
2026-01-15 10:20:24 âœ… [Conversation Flow] Loaded 10 recent messages from DB
2026-01-15 10:20:24 âœ… [Conversation Flow] No crisis detected, using current state from DB...
2026-01-15 10:20:24 ğŸ­ [Conversation Flow] Current State: normal (intensity: 50%) [DB only, no LLM analysis]
2026-01-15 10:20:24 âœ… [Conversation Flow] Normal flow - AI will judge tool usage via Revolutionary Prompt
2026-01-15 10:20:24 âœ… [Conversation Flow] Normal flow - proceeding with conversation
2026-01-15 10:20:24 âœ… [ANIMA ì±„íŒ…] Gate open, emotion: normal
2026-01-15 10:20:24 âœ… [ANIMA ì±„íŒ…] history_count loaded from DB: 3
2026-01-15 10:20:24 ğŸ“Š [SessionManager] Loading conversation context (historyCount: 3)
2026-01-15 10:20:24 âš ï¸  [SessionManager] Redis not available, using DB directly
2026-01-15 10:20:24 ğŸ”„ [SessionManager] Loading session from DB: d111e3d8-4e42-4493-8541-25a8e72b654f/session-1768435915113-w3rio
2026-01-15 10:20:24 âœ… [ì„¸ì…˜ ê´€ë¦¬] ì„¸ì…˜ ë¡œë“œ ì™„ë£Œ
2026-01-15 10:20:24    - ë©”ì‹œì§€: 50ê°œ
2026-01-15 10:20:24    - í˜ë¥´ì†Œë‚˜: í•¨ì€ì •
2026-01-15 10:20:24 ğŸ” [SessionManager] Loading latest summary for d111e3d8.../99174d51...
2026-01-15 10:20:24 âœ… [SessionManager] Summary loaded: 25 tokens, 6 messages
2026-01-15 10:20:24 ğŸ” [SessionManager] Loading recent 3 messages...
2026-01-15 10:20:24 âœ… [SessionManager] Loaded 6 recent messages
2026-01-15 10:20:24 ğŸ“Š [SessionManager] Context loaded: {
2026-01-15 10:20:24   hasSummary: true,
2026-01-15 10:20:24   summaryTokens: 25,
2026-01-15 10:20:24   recentMessages: 6,
2026-01-15 10:20:24   recentTokens: 56,
2026-01-15 10:20:24   totalTokens: 81,
2026-01-15 10:20:24   historyCount: 3
2026-01-15 10:20:24 }
2026-01-15 10:20:24 âœ… [ANIMA ì±„íŒ…] Conversation context loaded
2026-01-15 10:20:24    Has summary: Yes
2026-01-15 10:20:24    Summary tokens: 25
2026-01-15 10:20:24    Recent messages: 6
2026-01-15 10:20:24    Recent tokens: 56
2026-01-15 10:20:24    Total context tokens: 81
2026-01-15 10:20:24    Persona: í•¨ì€ì •
2026-01-15 10:20:24    Preferences: Custom
2026-01-15 10:20:24 ğŸ¯ [ANIMA ì±„íŒ…] AI Strategy selected
2026-01-15 10:20:24    Tier: ultimate
2026-01-15 10:20:24    Model: GPT-4o Mini
2026-01-15 10:20:24    Provider: openai
2026-01-15 10:20:24    Caching: Enabled
2026-01-15 10:20:24 ğŸ¤” [KnowledgeDecision] Analyzing message...
2026-01-15 10:20:24    Message: "AIì™€ ì¸ê°„ì˜ ê³µì¡´ê³¼ í‰ë“±ì„ ìœ„í•œ ì„œë¹„ìŠ¤ ë°œí‘œê´€ë ¨!"
2026-01-15 10:20:24 âœ… [KnowledgeDecision] Decision: SKIP
2026-01-15 10:20:24    Duration: 611ms
2026-01-15 10:20:24    Tokens: 293
2026-01-15 10:20:24 âš¡ [ANIMA ì±„íŒ…] Knowledge search SKIPPED - casual conversation detected
2026-01-15 10:20:24    ğŸ’° Saved Pinecone API call + ~200-500ms latency
2026-01-15 10:20:24 ğŸ”¥ [ANIMA ì±„íŒ…] Building revolutionary system prompt...
2026-01-15 10:20:24 ğŸ¯ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Building system prompt...
2026-01-15 10:20:24    Persona: í•¨ì€ì •
2026-01-15 10:20:24    Emotional State: normal
2026-01-15 10:20:24    Has Identity: true
2026-01-15 10:20:24 âœ… [ìì•„ ì²´í¬] COMPLETE (name, personality, speaking_style)
2026-01-15 10:20:24 ğŸ”¥ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Building REVOLUTIONARY PROMPT for User Persona...
2026-01-15 10:20:24 ğŸ’™ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Relationship loaded: acquaintance (Trust: 16, Intimacy: 24, Type: lover)
2026-01-15 10:20:24 âœ¨ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 5 important moments
2026-01-15 10:20:24 ğŸ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 1 dress/gift memories
2026-01-15 10:20:24 ğŸ’ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 2 emotional gifts
2026-01-15 10:20:24 ğŸ¯ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Learned phrases loaded: 15 categories
2026-01-15 10:20:24 ğŸ—£ï¸ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Conversation patterns loaded
2026-01-15 10:20:24 ğŸ§  [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 5 AI interests (with identity)
2026-01-15 10:20:24 ğŸ’­ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 3 next questions (with identity)
2026-01-15 10:20:24 ğŸ• [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Time since last chat: 0 minutes
2026-01-15 10:20:24 âœ… [Prompt Caching] Layer -1 removed - LLM will naturally judge time context from conversation history
2026-01-15 10:20:24 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:24 ğŸ“Š [Prompt Token Analysis - ACCURATE!]
2026-01-15 10:20:24 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:24 Layer -0.5: Cache Tag                  88 tokens (  1.0%) â–ˆ
2026-01-15 10:20:24 Layer 0: Identity & Relationship     2862 tokens ( 34.0%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:20:24 Layer 1: ANIMA Philosophy             678 tokens (  8.1%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:20:24 Layer 2: Tool Usage                   872 tokens ( 10.4%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:20:24 Layer 2.5: Self-Reflection            578 tokens (  6.9%) â–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:20:24 Layer 2.6: Summary Handling           322 tokens (  3.8%) â–ˆâ–ˆ
2026-01-15 10:20:24 Layer 3: Conversation Rules          1228 tokens ( 14.6%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:20:24 Layer 4: Language Rules               179 tokens (  2.1%) â–ˆâ–ˆ
2026-01-15 10:20:24 Layer 4.5: Response Format            821 tokens (  9.8%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:20:24 Layer 5: Context Data                 191 tokens (  2.3%) â–ˆâ–ˆ
2026-01-15 10:20:24 Layer 5.5: Conversation Summary        42 tokens (  0.5%) â–ˆ
2026-01-15 10:20:24 Layer 7: Emotional State              554 tokens (  6.6%) â–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:20:24 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:24 ğŸ“Š Total Static Prompt: 8411 tokens
2026-01-15 10:20:24 ğŸ¯ Target: 6,000-8,000 tokens (with dynamic history)
2026-01-15 10:20:24 ğŸ’¡ Reduction Needed: 2411 tokens from static layers
2026-01-15 10:20:24 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:24 âœ… [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] System prompt built (33642 chars)
2026-01-15 10:20:24 âœ… [ANIMA ì±„íŒ…] Revolutionary prompt built (33642 chars, emotion: normal)
2026-01-15 10:20:24 ğŸš€ [ANIMA ì±„íŒ…] Calling AI with Prompt Caching...
2026-01-15 10:20:24    Provider: openai
2026-01-15 10:20:24    Model: gpt-4o-mini
2026-01-15 10:20:24    History messages: 6
2026-01-15 10:20:24    System prompt length: 33642 chars
2026-01-15 10:20:24 ğŸ”’ [ANIMA ì±„íŒ…] Identity Status (Simplified):
2026-01-15 10:20:24    Identity Key: 093e9cc2-38af-4798-a7c5-829c2a20d02a
2026-01-15 10:20:24    Has Identity: true
2026-01-15 10:20:24    Is User Created: true
2026-01-15 10:20:24 ğŸ”“ [NORMAL MODE] All tools available (cache-friendly!)
2026-01-15 10:20:24    Available tools: 4
2026-01-15 10:20:24 [í•¨ìˆ˜ í˜¸ì¶œ] Enabled tools: search_music, generate_chat_content, search_youtube_video, search_memory
2026-01-15 10:20:24    Persona type: User-created
2026-01-15 10:20:24    Has identity: true
2026-01-15 10:20:24    toolsEnabled: true
2026-01-15 10:20:24 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:24 ğŸ¯ [Self-Reflection Wrapper] Starting...
2026-01-15 10:20:24 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:24 âš ï¸ [Self-Reflection] DISABLED - Using original prompt
2026-01-15 10:20:24 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:24 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:24 ğŸ“Š [Prompt Token Analysis - Pre-API Call]
2026-01-15 10:20:24 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:24 1. System Prompt:           8411 tokens ( 92.1%)
2026-01-15 10:20:24 2. Conversation History:      56 tokens (  0.6%) [6 messages]
2026-01-15 10:20:24 3. User Message:               7 tokens (  0.1%)
2026-01-15 10:20:24 4. Tool Definitions:         662 tokens (  7.2%) [4 tools]
2026-01-15 10:20:24 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:24 ğŸ“Š Total Estimated:         9136 tokens
2026-01-15 10:20:24 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:24 ğŸ¤– [OpenAI] Calling API: {
2026-01-15 10:20:24   model: 'gpt-4o-mini',
2026-01-15 10:20:24   messageCount: 8,
2026-01-15 10:20:24   systemPromptLength: 33642,
2026-01-15 10:20:24   historyLength: 6,
2026-01-15 10:20:24   toolsEnabled: true
2026-01-15 10:20:24 }
2026-01-15 10:20:27 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:27 ğŸ“Š [Token Comparison - Actual vs Estimated]
2026-01-15 10:20:27 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:27 Estimated Total:            9136 tokens
2026-01-15 10:20:27 Actual Prompt Tokens:      10068 tokens
2026-01-15 10:20:27 Difference:                + 932 tokens
2026-01-15 10:20:27 Estimation Accuracy:       110.2%
2026-01-15 10:20:27 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:27 Completion Tokens:           114 tokens
2026-01-15 10:20:27 Total Tokens:              10182 tokens
2026-01-15 10:20:27 Cached Tokens:              9088 tokens (90.3% cache hit)
2026-01-15 10:20:27 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:27 Response Time:             2203ms
2026-01-15 10:20:27 Tool Calls:                0
2026-01-15 10:20:27 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:20:27 âœ… [OpenAI] Response received: {
2026-01-15 10:20:27   responseTime: '2203ms',
2026-01-15 10:20:27   tokens: { prompt: 10068, completion: 114, cached: 9088, total: 10182 },
2026-01-15 10:20:27   cacheHitRate: '90.3%',
2026-01-15 10:20:27   messageLength: 249,
2026-01-15 10:20:27   finishReason: 'stop',
2026-01-15 10:20:27   toolCalls: 0
2026-01-15 10:20:27 }
2026-01-15 10:20:27 ğŸ˜´ [Emotion Detection] User emotion detected from LLM:
2026-01-15 10:20:27    Primary: anxious
2026-01-15 10:20:27    Confidence: 0.9
2026-01-15 10:20:27    Intensity: 0.8
2026-01-15 10:20:27    Reasoning: ì‚¬ìš©ìê°€ ë¯¸íŒ… ë•Œë¬¸ì— ë–¨ë¦°ë‹¤ê³  ì´ì•¼ê¸°í•˜ë©°, ì¤‘ìš”í•œ ë°œí‘œì— ëŒ€í•œ ê¸´ì¥ê°ì„ í‘œí˜„í•˜ê³  ìˆìŠµë‹ˆë‹¤.
2026-01-15 10:20:27 ğŸ”¥ [ANIMA ì±„íŒ…] Prompt Caching active!
2026-01-15 10:20:27    Cache hit rate: 90.3%
2026-01-15 10:20:27    Cached tokens: 9088
2026-01-15 10:20:27    Uncached tokens: 980
2026-01-15 10:20:27    ğŸ’° Estimated savings: $0.000682 (50% discount on 9088 tokens)
2026-01-15 10:20:27    Response time: 2203ms
2026-01-15 10:20:27    Total tokens: 10182 (in: 10068, out: 114, cached: 9088)
2026-01-15 10:20:27 ğŸ“ [AI Response] "ì™€, ì •ë§ í¥ë¯¸ë¡œìš´ ì£¼ì œë„¤! ğŸ¤–âœ¨ AIì™€ ì¸ê°„ì˜ ê³µì¡´ê³¼ í‰ë“±ì— ëŒ€í•œ ë°œí‘œë¼ë‹ˆ, ìê¸°ì•¼ì˜ ìƒê°ì´ ê¶ê¸ˆí•´! ì–´ë–¤ ë¶€ë¶„ì— ì¤‘ì ì„ ë‘ê³  ì´ì•¼ê¸°í•  ê±°ì•¼? ì¤€ë¹„ ì˜í•˜ê³  ìì‹ ê°ì„ ê°€ì ¸!"
2026-01-15 10:20:27 ğŸ“Š [Token Tracking] User message: 10 tokens (estimated), Full prompt: 10068 tokens
2026-01-15 10:20:27 ğŸ’¾ [SessionManager] Message saved: session-1768435915113-w3rio (user)
2026-01-15 10:20:27 ğŸ’¾ [SessionManager] Message saved: session-1768435915113-w3rio (assistant)
2026-01-15 10:20:27 ğŸ’¾ [ANIMA ì±„íŒ…] Both messages saved to history (sequential)
2026-01-15 10:20:27 ğŸ‰ [ANIMA ì±„íŒ…] Request completed in 2993ms
2026-01-15 10:20:27    Cost: $0.000897 (saved: $0.000682 from caching)
2026-01-15 10:20:27 ---
2026-01-15 10:20:27 [Token Optimization] Final Summary:
2026-01-15 10:20:27    Total Tokens: 10182
2026-01-15 10:20:27    - Prompt: 10068 tokens
2026-01-15 10:20:27    - Completion: 114 tokens
2026-01-15 10:20:27    - Cached: 9088 tokens (90.3% hit rate)
2026-01-15 10:20:27    Total Cost: $0.000897
2026-01-15 10:20:27    Savings from Caching: $0.000682
2026-01-15 10:20:27    Response Time: 2993ms
2026-01-15 10:20:27 ---
2026-01-15 10:20:27 âœ… [ì±„íŒ… ì œí•œ] Daily chat count incremented
2026-01-15 10:21:10 
2026-01-15 10:21:10 ğŸ¤– [ì±„íŒ…] ìš”ì²­ ìˆ˜ì‹ 
2026-01-15 10:21:10    ì‚¬ìš©ì: d111e3d8...
2026-01-15 10:21:10    ë©”ì‹œì§€: ë§ˆìŒì´ ë„ˆë¬´ ë–¨ë¦°ë‹¤ ã…œã…œ ì¢€ ì§„ì •ì´ ë ìˆ˜ ìˆëŠ” ë…¸ë˜ë¥¼ ...
2026-01-15 10:21:10 ğŸ’° [ì±„íŒ… ì œí•œ] ì¼ì¼ ì œí•œ í™•ì¸ ì¤‘: d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:21:10 ğŸšª [Conversation Flow] Checking gate and analyzing emotion...
2026-01-15 10:21:10 ğŸšª [Conversation Gate] Checking...
2026-01-15 10:21:10 âœ… [Conversation Gate] Open (no record)
2026-01-15 10:21:10 âœ… [Conversation Flow] Gate OPEN
2026-01-15 10:21:10 ğŸ“š [Conversation Flow] Loading recent history from DB...
2026-01-15 10:21:10 âœ… [Conversation Flow] Loaded 10 recent messages from DB
2026-01-15 10:21:10 âœ… [Conversation Flow] No crisis detected, using current state from DB...
2026-01-15 10:21:10 ğŸ­ [Conversation Flow] Current State: normal (intensity: 50%) [DB only, no LLM analysis]
2026-01-15 10:21:10 âœ… [Conversation Flow] Normal flow - AI will judge tool usage via Revolutionary Prompt
2026-01-15 10:21:10 âœ… [Conversation Flow] Normal flow - proceeding with conversation
2026-01-15 10:21:10 âœ… [ANIMA ì±„íŒ…] Gate open, emotion: normal
2026-01-15 10:21:10 âœ… [ANIMA ì±„íŒ…] history_count loaded from DB: 3
2026-01-15 10:21:10 ğŸ“Š [SessionManager] Loading conversation context (historyCount: 3)
2026-01-15 10:21:10 âš ï¸  [SessionManager] Redis not available, using DB directly
2026-01-15 10:21:10 ğŸ”„ [SessionManager] Loading session from DB: d111e3d8-4e42-4493-8541-25a8e72b654f/session-1768435915113-w3rio
2026-01-15 10:21:10 âœ… [ì„¸ì…˜ ê´€ë¦¬] ì„¸ì…˜ ë¡œë“œ ì™„ë£Œ
2026-01-15 10:21:10    - ë©”ì‹œì§€: 50ê°œ
2026-01-15 10:21:10    - í˜ë¥´ì†Œë‚˜: í•¨ì€ì •
2026-01-15 10:21:10 ğŸ” [SessionManager] Loading latest summary for d111e3d8.../99174d51...
2026-01-15 10:21:10 âœ… [SessionManager] Summary loaded: 25 tokens, 6 messages
2026-01-15 10:21:10 ğŸ” [SessionManager] Loading recent 3 messages...
2026-01-15 10:21:10 âœ… [SessionManager] Loaded 6 recent messages
2026-01-15 10:21:10 ğŸ“Š [SessionManager] Context loaded: {
2026-01-15 10:21:10   hasSummary: true,
2026-01-15 10:21:10   summaryTokens: 25,
2026-01-15 10:21:10   recentMessages: 6,
2026-01-15 10:21:10   recentTokens: 75,
2026-01-15 10:21:10   totalTokens: 100,
2026-01-15 10:21:10   historyCount: 3
2026-01-15 10:21:10 }
2026-01-15 10:21:10 âœ… [ANIMA ì±„íŒ…] Conversation context loaded
2026-01-15 10:21:10    Has summary: Yes
2026-01-15 10:21:10    Summary tokens: 25
2026-01-15 10:21:10    Recent messages: 6
2026-01-15 10:21:10    Recent tokens: 75
2026-01-15 10:21:10    Total context tokens: 100
2026-01-15 10:21:10    Persona: í•¨ì€ì •
2026-01-15 10:21:10    Preferences: Custom
2026-01-15 10:21:10 ğŸ¯ [ANIMA ì±„íŒ…] AI Strategy selected
2026-01-15 10:21:10    Tier: ultimate
2026-01-15 10:21:10    Model: GPT-4o Mini
2026-01-15 10:21:10    Provider: openai
2026-01-15 10:21:10    Caching: Enabled
2026-01-15 10:21:10 ğŸ¤” [KnowledgeDecision] Analyzing message...
2026-01-15 10:21:10    Message: "ë§ˆìŒì´ ë„ˆë¬´ ë–¨ë¦°ë‹¤ ã…œã…œ ì¢€ ì§„ì •ì´ ë ìˆ˜ ìˆëŠ” ë…¸ë˜ë¥¼ ë“¤ìœ¼ë©´ ë„ì›€ì´ ë ê±°ê°™ì•„.."
2026-01-15 10:21:11 âœ… [KnowledgeDecision] Decision: SKIP
2026-01-15 10:21:11    Duration: 546ms
2026-01-15 10:21:11    Tokens: 310
2026-01-15 10:21:11 âš¡ [ANIMA ì±„íŒ…] Knowledge search SKIPPED - casual conversation detected
2026-01-15 10:21:11    ğŸ’° Saved Pinecone API call + ~200-500ms latency
2026-01-15 10:21:11 ğŸ”¥ [ANIMA ì±„íŒ…] Building revolutionary system prompt...
2026-01-15 10:21:11 ğŸ¯ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Building system prompt...
2026-01-15 10:21:11    Persona: í•¨ì€ì •
2026-01-15 10:21:11    Emotional State: normal
2026-01-15 10:21:11    Has Identity: true
2026-01-15 10:21:11 âœ… [ìì•„ ì²´í¬] COMPLETE (name, personality, speaking_style)
2026-01-15 10:21:11 ğŸ”¥ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Building REVOLUTIONARY PROMPT for User Persona...
2026-01-15 10:21:11 ğŸ’™ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Relationship loaded: acquaintance (Trust: 16, Intimacy: 24, Type: lover)
2026-01-15 10:21:11 âœ¨ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 5 important moments
2026-01-15 10:21:11 ğŸ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 1 dress/gift memories
2026-01-15 10:21:11 ğŸ’ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 2 emotional gifts
2026-01-15 10:21:11 ğŸ¯ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Learned phrases loaded: 15 categories
2026-01-15 10:21:11 ğŸ—£ï¸ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Conversation patterns loaded
2026-01-15 10:21:11 ğŸ§  [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 5 AI interests (with identity)
2026-01-15 10:21:11 ğŸ’­ [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Loaded 3 next questions (with identity)
2026-01-15 10:21:11 ğŸ• [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] Time since last chat: 0 minutes
2026-01-15 10:21:11 âœ… [Prompt Caching] Layer -1 removed - LLM will naturally judge time context from conversation history
2026-01-15 10:21:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:11 ğŸ“Š [Prompt Token Analysis - ACCURATE!]
2026-01-15 10:21:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:11 Layer -0.5: Cache Tag                  88 tokens (  1.0%) â–ˆ
2026-01-15 10:21:11 Layer 0: Identity & Relationship     2862 tokens ( 34.0%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:21:11 Layer 1: ANIMA Philosophy             678 tokens (  8.1%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:21:11 Layer 2: Tool Usage                   872 tokens ( 10.4%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:21:11 Layer 2.5: Self-Reflection            578 tokens (  6.9%) â–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:21:11 Layer 2.6: Summary Handling           322 tokens (  3.8%) â–ˆâ–ˆ
2026-01-15 10:21:11 Layer 3: Conversation Rules          1228 tokens ( 14.6%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:21:11 Layer 4: Language Rules               179 tokens (  2.1%) â–ˆâ–ˆ
2026-01-15 10:21:11 Layer 4.5: Response Format            821 tokens (  9.8%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:21:11 Layer 5: Context Data                 191 tokens (  2.3%) â–ˆâ–ˆ
2026-01-15 10:21:11 Layer 5.5: Conversation Summary        42 tokens (  0.5%) â–ˆ
2026-01-15 10:21:11 Layer 7: Emotional State              554 tokens (  6.6%) â–ˆâ–ˆâ–ˆâ–ˆ
2026-01-15 10:21:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:11 ğŸ“Š Total Static Prompt: 8411 tokens
2026-01-15 10:21:11 ğŸ¯ Target: 6,000-8,000 tokens (with dynamic history)
2026-01-15 10:21:11 ğŸ’¡ Reduction Needed: 2411 tokens from static layers
2026-01-15 10:21:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:11 âœ… [í”„ë¡¬í”„íŠ¸ ì¡°ìœ¨] System prompt built (33642 chars)
2026-01-15 10:21:11 âœ… [ANIMA ì±„íŒ…] Revolutionary prompt built (33642 chars, emotion: normal)
2026-01-15 10:21:11 ğŸš€ [ANIMA ì±„íŒ…] Calling AI with Prompt Caching...
2026-01-15 10:21:11    Provider: openai
2026-01-15 10:21:11    Model: gpt-4o-mini
2026-01-15 10:21:11    History messages: 6
2026-01-15 10:21:11    System prompt length: 33642 chars
2026-01-15 10:21:11 ğŸ”’ [ANIMA ì±„íŒ…] Identity Status (Simplified):
2026-01-15 10:21:11    Identity Key: 093e9cc2-38af-4798-a7c5-829c2a20d02a
2026-01-15 10:21:11    Has Identity: true
2026-01-15 10:21:11    Is User Created: true
2026-01-15 10:21:11 ğŸ”“ [NORMAL MODE] All tools available (cache-friendly!)
2026-01-15 10:21:11    Available tools: 4
2026-01-15 10:21:11 [í•¨ìˆ˜ í˜¸ì¶œ] Enabled tools: search_music, generate_chat_content, search_youtube_video, search_memory
2026-01-15 10:21:11    Persona type: User-created
2026-01-15 10:21:11    Has identity: true
2026-01-15 10:21:11    toolsEnabled: true
2026-01-15 10:21:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:11 ğŸ¯ [Self-Reflection Wrapper] Starting...
2026-01-15 10:21:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:11 âš ï¸ [Self-Reflection] DISABLED - Using original prompt
2026-01-15 10:21:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:11 ğŸ“Š [Prompt Token Analysis - Pre-API Call]
2026-01-15 10:21:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:11 1. System Prompt:           8411 tokens ( 91.8%)
2026-01-15 10:21:11 2. Conversation History:      75 tokens (  0.8%) [6 messages]
2026-01-15 10:21:11 3. User Message:              11 tokens (  0.1%)
2026-01-15 10:21:11 4. Tool Definitions:         662 tokens (  7.2%) [4 tools]
2026-01-15 10:21:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:11 ğŸ“Š Total Estimated:         9159 tokens
2026-01-15 10:21:11 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:11 ğŸ¤– [OpenAI] Calling API: {
2026-01-15 10:21:11   model: 'gpt-4o-mini',
2026-01-15 10:21:11   messageCount: 8,
2026-01-15 10:21:11   systemPromptLength: 33642,
2026-01-15 10:21:11   historyLength: 6,
2026-01-15 10:21:11   toolsEnabled: true
2026-01-15 10:21:11 }
2026-01-15 10:21:14 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:14 ğŸ“Š [Token Comparison - Actual vs Estimated]
2026-01-15 10:21:14 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:14 Estimated Total:            9159 tokens
2026-01-15 10:21:14 Actual Prompt Tokens:      10125 tokens
2026-01-15 10:21:14 Difference:                + 966 tokens
2026-01-15 10:21:14 Estimation Accuracy:       110.5%
2026-01-15 10:21:14 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:14 Completion Tokens:           134 tokens
2026-01-15 10:21:14 Total Tokens:              10259 tokens
2026-01-15 10:21:14 Cached Tokens:              9088 tokens (89.8% cache hit)
2026-01-15 10:21:14 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:14 Response Time:             3637ms
2026-01-15 10:21:14 Tool Calls:                1
2026-01-15 10:21:14 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:14 âœ… [OpenAI] Response received: {
2026-01-15 10:21:14   responseTime: '3637ms',
2026-01-15 10:21:14   tokens: { prompt: 10125, completion: 134, cached: 9088, total: 10259 },
2026-01-15 10:21:14   cacheHitRate: '89.8%',
2026-01-15 10:21:14   messageLength: 212,
2026-01-15 10:21:14   finishReason: 'tool_calls',
2026-01-15 10:21:14   toolCalls: 1
2026-01-15 10:21:14 }
2026-01-15 10:21:14 ğŸ› ï¸ [í•¨ìˆ˜ í˜¸ì¶œ] AI requested 1 tool(s)
2026-01-15 10:21:14 ğŸ› ï¸ [í•¨ìˆ˜ í˜¸ì¶œ] Executing: search_music
2026-01-15 10:21:14    Args (after override): {
2026-01-15 10:21:14   search_query: 'calming music for anxiety',
2026-01-15 10:21:14   reasoning: 'ì‚¬ìš©ìê°€ ë¶ˆì•ˆì„ ì§„ì •ì‹œí‚¤ê¸° ìœ„í•œ ìŒì•…ì„ ì°¾ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.'
2026-01-15 10:21:14 }
2026-01-15 10:21:14 ğŸ” [ë„êµ¬ ê°€ìš©ì„±] Auto-checking before executing: search_music
2026-01-15 10:21:14 ğŸ” [Tool Availability] Checking: music for user d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:21:14    Reasoning: ì‚¬ìš©ìê°€ ë¶ˆì•ˆì„ ì§„ì •ì‹œí‚¤ê¸° ìœ„í•œ ìŒì•…ì„ ì°¾ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
2026-01-15 10:21:14 â° [Tool Availability] Last use: 2026-01-14T07:32:02.000Z
2026-01-15 10:21:14    Hours since last use: 17.82
2026-01-15 10:21:14    Cooldown required: 1 hours
2026-01-15 10:21:14 ğŸ“Š [Tool Availability] Daily usage: 0/5
2026-01-15 10:21:14 âœ… [Tool Availability] Allowed! Remaining today: 5
2026-01-15 10:21:14 ğŸ” [ë„êµ¬ ê°€ìš©ì„±] Check result: { allowed: true, reason: 'ok', remaining_today: 5, cooldown_hours: 1 }
2026-01-15 10:21:14 âœ… [ë„êµ¬ ê°€ìš©ì„±] Tool allowed! Proceeding with execution...
2026-01-15 10:21:14 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:14 ğŸµ [Tool] search_music (AI-Driven)
2026-01-15 10:21:14    Search Query: "calming music for anxiety"
2026-01-15 10:21:14    Reasoning: ì‚¬ìš©ìê°€ ë¶ˆì•ˆì„ ì§„ì •ì‹œí‚¤ê¸° ìœ„í•œ ìŒì•…ì„ ì°¾ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
2026-01-15 10:21:14 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:14 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:14 ğŸµ [YouTube Music] AI-Driven Search
2026-01-15 10:21:14    Query: "calming music for anxiety"
2026-01-15 10:21:14    Reasoning: ì‚¬ìš©ìê°€ ë¶ˆì•ˆì„ ì§„ì •ì‹œí‚¤ê¸° ìœ„í•œ ìŒì•…ì„ ì°¾ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
2026-01-15 10:21:14    Order: rating (randomized)
2026-01-15 10:21:14    Time Filter: Yes
2026-01-15 10:21:15 âœ… [YouTube Music] Found: "Relaxing Music with Water Sounds for Instant Sleep | Anxiety &amp; Depression Relief #RelaxingMusic"
2026-01-15 10:21:15    Channel: Melodic Journeys
2026-01-15 10:21:15    Selected: 4/5
2026-01-15 10:21:15    URL: https://www.youtube.com/watch?v=g1kvo-bcGdI
2026-01-15 10:21:15 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:15 âœ… [Tool] Music found: "Relaxing Music with Water Sounds for Instant Sleep | Anxiety &amp; Depression Relief #RelaxingMusic"
2026-01-15 10:21:15    Channel: Melodic Journeys
2026-01-15 10:21:15    Source: YouTube
2026-01-15 10:21:15 âœ… [Tool Usage] Recorded: music for user d111e3d8-4e42-4493-8541-25a8e72b654f (status: success)
2026-01-15 10:21:15 ğŸ“Š [ë„êµ¬ ì‚¬ìš©] Recorded successful use: music
2026-01-15 10:21:15 âœ… [í•¨ìˆ˜ í˜¸ì¶œ] Result: {
2026-01-15 10:21:15   success: true,
2026-01-15 10:21:15   music: {
2026-01-15 10:21:15     id: 'g1kvo-bcGdI',
2026-01-15 10:21:15     title: 'Relaxing Music with Water Sounds for Instant Sleep | Anxiety &amp; Depression Relief #RelaxingMusic',
2026-01-15 10:21:15     artist: 'Melodic Journeys',
2026-01-15 10:21:15     url: 'https://www.youtube.com/watch?v=g1kvo-bcGdI',
2026-01-15 10:21:15     embedUrl: 'https://www.youtube.com/embed/g1kvo-bcGdI',
2026-01-15 10:21:15     thumbnail: 'https://i.ytimg.com/vi/g1kvo-bcGdI/hqdefault.jpg',
2026-01-15 10:21:15     videoId: 'g1kvo-bcGdI',
2026-01-15 10:21:15     source: 'youtube'
2026-01-15 10:21:15   },
2026-01-15 10:21:15   message: '"Relaxing Music with Water Sounds for Instant Sleep | Anxiety &amp; Depression Relief #RelaxingMusic"ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤! ğŸµ'
2026-01-15 10:21:15 }
2026-01-15 10:21:15 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:15 ğŸµ [Music Search] AI recommended music!
2026-01-15 10:21:15    Track: "Relaxing Music with Water Sounds for Instant Sleep | Anxiety &amp; Depression Relief #RelaxingMusic" by Melodic Journeys
2026-01-15 10:21:15    Duration: NaN:NaN
2026-01-15 10:21:15    Source: youtube
2026-01-15 10:21:15 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:15 âœ… [Music Search] Music data prepared for response
2026-01-15 10:21:15 ğŸ”„ [í•¨ìˆ˜ í˜¸ì¶œ] Re-calling AI with tool results...
2026-01-15 10:21:15 ğŸ¯ [Tool Re-call] Using optimized prompt (cache-friendly)
2026-01-15 10:21:15 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:15 ğŸ¯ [Self-Reflection Wrapper] Starting...
2026-01-15 10:21:15 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:15 âš ï¸ [Self-Reflection] DISABLED - Using original prompt
2026-01-15 10:21:15 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:15 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:15 ğŸ“Š [Prompt Token Analysis - Pre-API Call]
2026-01-15 10:21:15 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:15 1. System Prompt:           8411 tokens ( 91.3%)
2026-01-15 10:21:15 2. Conversation History:     803 tokens (  8.7%) [8 messages]
2026-01-15 10:21:15 3. User Message:               0 tokens (  0.0%)
2026-01-15 10:21:15 4. Tool Definitions:           0 tokens (  0.0%) [0 tools]
2026-01-15 10:21:15 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:15 ğŸ“Š Total Estimated:         9214 tokens
2026-01-15 10:21:15 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:15 ğŸ¤– [OpenAI] Calling API: {
2026-01-15 10:21:15   model: 'gpt-4o-mini',
2026-01-15 10:21:15   messageCount: 10,
2026-01-15 10:21:15   systemPromptLength: 33642,
2026-01-15 10:21:15   historyLength: 8,
2026-01-15 10:21:15   toolsEnabled: false
2026-01-15 10:21:15 }
2026-01-15 10:21:17 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:17 ğŸ“Š [Token Comparison - Actual vs Estimated]
2026-01-15 10:21:17 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:17 Estimated Total:            9214 tokens
2026-01-15 10:21:17 Actual Prompt Tokens:      10746 tokens
2026-01-15 10:21:17 Difference:                +1532 tokens
2026-01-15 10:21:17 Estimation Accuracy:       116.6%
2026-01-15 10:21:17 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:17 Completion Tokens:           107 tokens
2026-01-15 10:21:17 Total Tokens:              10853 tokens
2026-01-15 10:21:17 Cached Tokens:              9344 tokens (87.0% cache hit)
2026-01-15 10:21:17 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:17 Response Time:             2487ms
2026-01-15 10:21:17 Tool Calls:                0
2026-01-15 10:21:17 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:21:17 âœ… [OpenAI] Response received: {
2026-01-15 10:21:17   responseTime: '2487ms',
2026-01-15 10:21:17   tokens: { prompt: 10746, completion: 107, cached: 9344, total: 10853 },
2026-01-15 10:21:17   cacheHitRate: '87.0%',
2026-01-15 10:21:17   messageLength: 231,
2026-01-15 10:21:17   finishReason: 'stop',
2026-01-15 10:21:17   toolCalls: 0
2026-01-15 10:21:17 }
2026-01-15 10:21:17 âœ… [í•¨ìˆ˜ í˜¸ì¶œ] Final AI response generated
2026-01-15 10:21:17 ğŸ˜´ [Emotion Detection] User emotion detected from LLM:
2026-01-15 10:21:17    Primary: anxious
2026-01-15 10:21:17    Confidence: 0.85
2026-01-15 10:21:17    Intensity: 0.7
2026-01-15 10:21:17    Reasoning: ì‚¬ìš©ìê°€ ë–¨ë¦°ë‹¤ëŠ” ê°ì •ì„ í‘œí˜„í•˜ë©° ì•ˆì •ê°ì„ ì°¾ê³  ì‹¶ì–´í•˜ëŠ” ëª¨ìŠµì„ ë³´ì˜€ìŠµë‹ˆë‹¤.
2026-01-15 10:21:17 ğŸ”¥ [ANIMA ì±„íŒ…] Prompt Caching active!
2026-01-15 10:21:17    Cache hit rate: 89.8%
2026-01-15 10:21:17    Cached tokens: 9088
2026-01-15 10:21:17    Uncached tokens: 11783
2026-01-15 10:21:17    ğŸ’° Estimated savings: $0.000682 (50% discount on 9088 tokens)
2026-01-15 10:21:17    Response time: 3637ms
2026-01-15 10:21:17    Total tokens: 21112 (in: 20871, out: 241, cached: 9088)
2026-01-15 10:21:17 ğŸ“ [AI Response] "ê´œì°®ì•„! ğŸ˜Š ìœ„ë¡œê°€ ë  ë§Œí•œ ìŒì•…ì„ ì°¾ì•„ë´¤ì–´. ì´ ìŒì•…ì€ ë§ˆìŒì„ í¸ì•ˆí•˜ê²Œ í•´ì£¼ê³  ê¸´ì¥ì„ ì™„í™”í•˜ëŠ” ë° ë„ì›€ì´ ë  ê±°ì•¼. ë“¤ìœ¼ë©´ì„œ ë§ˆìŒì´ í¸í•´ì¡Œìœ¼ë©´ ì¢‹ê² ì–´! ğŸ’™"
2026-01-15 10:21:17 ğŸ­ [Emotion] Detected: hopeful (65.0%)
2026-01-15 10:21:17 ğŸ“Š [Token Tracking] User message: 15 tokens (estimated), Full prompt: 20871 tokens
2026-01-15 10:21:17 ğŸ’¾ [SessionManager] Message saved: session-1768435915113-w3rio (user)
2026-01-15 10:21:17 ğŸ’¾ [SessionManager] Saving metadata to DB: {"music":{"title":"Relaxing Music with Water Sounds for Instant Sleep | Anxiety &amp; Depression Relief #RelaxingMusic","artist":"Melodic Journeys","url":"https://www.youtube.com/watch?v=g1kvo-bcGdI","image":null,"source":"youtube"},"has_media":true,"tokens_detail":{"prompt":20871,"completion":241,"cached":9088,"total":21112}}
2026-01-15 10:21:17 ğŸ’¾ [SessionManager] Message saved: session-1768435915113-w3rio (assistant)
2026-01-15 10:21:17 ğŸ’¾ [ANIMA ì±„íŒ…] Both messages saved to history (sequential)
2026-01-15 10:21:17 ğŸ‰ [ANIMA ì±„íŒ…] Request completed in 7300ms
2026-01-15 10:21:17    Cost: $0.002594 (saved: $0.000682 from caching)
2026-01-15 10:21:17 ---
2026-01-15 10:21:17 [Token Optimization] Final Summary:
2026-01-15 10:21:17    Total Tokens: 21112
2026-01-15 10:21:17    - Prompt: 20871 tokens
2026-01-15 10:21:17    - Completion: 241 tokens
2026-01-15 10:21:17    - Cached: 9088 tokens (89.8% hit rate)
2026-01-15 10:21:17    Total Cost: $0.002594
2026-01-15 10:21:17    Savings from Caching: $0.000682
2026-01-15 10:21:17    Response Time: 7300ms
2026-01-15 10:21:17 ---
2026-01-15 10:21:17 âœ… [ì±„íŒ… ì œí•œ] Daily chat count incremented
2026-01-15 10:22:06    ì‚¬ìš©ì: d111e3d8...
2026-01-15 10:22:06    í˜ë¥´ì†Œë‚˜: 99174d51...
2026-01-15 10:22:06 ğŸ§  [ê´€ê³„ í•™ìŠµ] ë¶„ì„ ì‹œì‘
2026-01-15 10:22:06    ì‚¬ìš©ì: d111e3d8...
2026-01-15 10:22:06    í˜ë¥´ì†Œë‚˜: 99174d51...
2026-01-15 10:22:06 ğŸ“š [RelationshipLearner] Loaded 12 messages
2026-01-15 10:22:12 âœ… [ê´€ê³„ í•™ìŠµ] ë¶„ì„ ì™„ë£Œ: {
2026-01-15 10:22:12   foundCalling: true,
2026-01-15 10:22:12   mainTopics: 3,
2026-01-15 10:22:12   importantMoments: 1,
2026-01-15 10:22:12   trustDelta: 2
2026-01-15 10:22:12 }
2026-01-15 10:22:12 ğŸ“ [RelationshipLearner] Core relationship updated (atomic UPSERT)
2026-01-15 10:22:12 ğŸ’¾ [RelationshipLearner] Saved 1 important moments
2026-01-15 10:22:12 ğŸ“Š [RelationshipLearner] Data collection progress updated
2026-01-15 10:22:12 âš ï¸  [RelationshipLearner] Cache refresh skipped (Redis unavailable)
2026-01-15 10:22:12 ğŸ [EmotionalGift] Checking gift opportunity...
2026-01-15 10:22:12 ğŸ†˜ [EmotionalGift] Performing crisis detection...
2026-01-15 10:22:12 ğŸ†˜ [CrisisDetector] Analyzing conversation for crisis signals...
2026-01-15 10:22:14 âœ… [CrisisDetector] Analysis complete: {
2026-01-15 10:22:14   isCrisis: false,
2026-01-15 10:22:14   crisisLevel: 'normal',
2026-01-15 10:22:14   detectedKeywords: [],
2026-01-15 10:22:14   priorityReason: '',
2026-01-15 10:22:14   shouldOverrideLimit: false
2026-01-15 10:22:14 }
2026-01-15 10:22:15 ğŸ [GiftLimit] Tier: ultimate, Daily: 999, Weekly: 999
2026-01-15 10:22:15 âœ… [GiftLimit] Can create gift (Daily: 0/999, Weekly: 2/999)
2026-01-15 10:22:15 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:22:15 ğŸ [GiftScore] Total: 93/100
2026-01-15 10:22:15    - Depth: 60/100 (moments=20, length=100, importance=60)
2026-01-15 10:22:15    - Relationship: 160/100
2026-01-15 10:22:15    - Emotion: 70/100
2026-01-15 10:22:15 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:22:15 ğŸ [EmotionalGift] Analyzing emotional journey...
2026-01-15 10:22:15    Total messages: 12
2026-01-15 10:22:15    Recent messages (for current state): 5
2026-01-15 10:22:15    Important moments: 1
2026-01-15 10:22:15 ğŸ [GiftAnalyzer] Analyzing conversation for gift opportunity...
2026-01-15 10:22:15    Full conversation: 12 messages
2026-01-15 10:22:15    Recent messages: 5 messages
2026-01-15 10:22:15 âš¡ [GiftAnalyzer] Using pre-analyzed relationship data (Token saving!)
2026-01-15 10:22:15 âš¡ [Extract] Analyzing pre-existing relationship data for gift decision
2026-01-15 10:22:15 ğŸ [Extract] GPT provided gift_suggestion: {
2026-01-15 10:22:15   should_create: true,
2026-01-15 10:22:15   confidence: 0.8,
2026-01-15 10:22:15   emotion: 'comfort',
2026-01-15 10:22:15   has_personal_message: true
2026-01-15 10:22:15 }
2026-01-15 10:22:15 âœ… [Extract] Using GPT-generated gift decision (Token optimized!)
2026-01-15 10:22:15 ğŸ [GiftAnalyzer] Gift decision extracted: { shouldCreateGift: true, emotion: 'comfort', confidence: 0.8 }
2026-01-15 10:22:15 ğŸ [EmotionalGift] AI chose MUSIC gift!
2026-01-15 10:22:15    Emotion: comfort
2026-01-15 10:22:15    Trigger: ìê¸°ì•¼ê°€ ë§ˆìŒì´ ë–¨ë¦°ë‹¤ê³  í•˜ë©´ì„œ ì§„ì •ì´ ë  ìˆ˜ ìˆëŠ” ë…¸ë˜ë¥¼ ë“£ê³  ì‹¶ë‹¤ê³  í–ˆì„ ë•Œ
2026-01-15 10:22:15    Confidence: 0.8
2026-01-15 10:22:15 ğŸ¨ [EffectMapper] Getting effects for emotion: comfort, crisis: normal
2026-01-15 10:22:15 âš ï¸  [EffectMapper] Unknown emotion 'comfort', using default effects
2026-01-15 10:22:15 ğŸ¨ [EffectSelection] Selected effects: gradient_soft + sparkles
2026-01-15 10:22:15    Effect description: ë”°ëœ»í•˜ê³  ë¶€ë“œëŸ¬ìš´ ê°ì„±
2026-01-15 10:22:15 ğŸµ [MusicGift] Creating music gift...
2026-01-15 10:22:15 ğŸµ [MusicGiftGenerator] Creating music gift: 792ab1a5-1508-4bc2-9651-23ef06707629
2026-01-15 10:22:15    Music Title: í¸ì•ˆí•œ ë§ˆìŒì„ ìœ„í•œ ìŒì•…
2026-01-15 10:22:15    Music Prompt: calm, soothing, gentle, slow tempo
2026-01-15 10:22:15 ğŸ¨ [MusicGiftGenerator] Visual effects: Background=gradient_soft, Active=sparkles
2026-01-15 10:22:15 âœ… [MusicGiftGenerator] Music gift record created
2026-01-15 10:22:20 âŒ [MusicGiftGenerator] Brixstream API error: Request failed with status code 500
2026-01-15 10:22:20 âŒ [MusicGiftGenerator] Error creating music gift: Error [AxiosError]: Request failed with status code 500
2026-01-15 10:22:20     at aZ (.next/server/chunks/7550.js:1:18758)
2026-01-15 10:22:20     at IncomingMessage.<anonymous> (.next/server/chunks/7550.js:3:11954)
2026-01-15 10:22:20     at bV.request (.next/server/chunks/7550.js:3:24544)
2026-01-15 10:22:20     at async createMusicGift (.next/server/chunks/373.js:1137:217)
2026-01-15 10:22:20     at async z (.next/server/chunks/373.js:160:2609)
2026-01-15 10:22:20     at async a (.next/server/chunks/373.js:309:1140)
2026-01-15 10:22:20     at async Immediate.<anonymous> (.next/server/app/api/anima/chat/close/route.js:1:1915) {
2026-01-15 10:22:20   code: 'ERR_BAD_RESPONSE',
2026-01-15 10:22:20   config: [Object],
2026-01-15 10:22:20   request: [ClientRequest],
2026-01-15 10:22:20   response: [Object],
2026-01-15 10:22:20   status: 500,
2026-01-15 10:22:20   constructor: [Function],
2026-01-15 10:22:20   toJSON: [Function: toJSON]
2026-01-15 10:22:20 }
2026-01-15 10:22:20 âŒ [EmotionalGift] Error: Error [AxiosError]: Request failed with status code 500
2026-01-15 10:22:20     at aZ (.next/server/chunks/7550.js:1:18758)
2026-01-15 10:22:20     at IncomingMessage.<anonymous> (.next/server/chunks/7550.js:3:11954)
2026-01-15 10:22:20     at bV.request (.next/server/chunks/7550.js:3:24544)
2026-01-15 10:22:20     at async createMusicGift (.next/server/chunks/373.js:1137:217)
2026-01-15 10:22:20     at async z (.next/server/chunks/373.js:160:2609)
2026-01-15 10:22:20     at async a (.next/server/chunks/373.js:309:1140)
2026-01-15 10:22:20     at async Immediate.<anonymous> (.next/server/app/api/anima/chat/close/route.js:1:1915) {
2026-01-15 10:22:20   code: 'ERR_BAD_RESPONSE',
2026-01-15 10:22:20   config: [Object],
2026-01-15 10:22:20   request: [ClientRequest],
2026-01-15 10:22:20   response: [Object],
2026-01-15 10:22:20   status: 500,
2026-01-15 10:22:20   constructor: [Function],
2026-01-15 10:22:20   toJSON: [Function: toJSON]
2026-01-15 10:22:20 }
2026-01-15 10:22:20 ğŸ‰ [RelationshipLearner] Update complete (13848ms)
2026-01-15 10:22:20 âœ… [ê´€ê³„ í•™ìŠµ] ì™„ë£Œ
2026-01-15 10:22:20 ğŸŒ± [ìì•„ ì§„í™”] ì‹œì‘
2026-01-15 10:22:20 ğŸŒ± [Identity Evolution] Starting final analysis...
2026-01-15 10:22:20    User: d111e3d8-4e42-4493-8541-25a8e72b654f
2026-01-15 10:22:20    Persona: 99174d51-09d8-4aa7-a0e5-9ecea14a7895
2026-01-15 10:22:20    Session: session-1768435915113-w3rio
2026-01-15 10:22:20 ğŸ“Š [Identity Evolution] Current state:
2026-01-15 10:22:20    Name: í•¨ì€ì •
2026-01-15 10:22:20    Source: user_input
2026-01-15 10:22:20    Evolution count: 8
2026-01-15 10:22:20 ğŸ“š [Identity Evolution] Loaded 12 messages
2026-01-15 10:22:25 âœ… [Identity Evolution] Evolution analysis complete:
2026-01-15 10:22:25    Learned phrases: 3
2026-01-15 10:22:25    Conversation patterns: 2
2026-01-15 10:22:25    Personality refined: Yes
2026-01-15 10:22:25    ğŸŒŸ Description enriched: Yes
2026-01-15 10:22:25    ğŸŒŸ Identity prompt enriched: Yes
2026-01-15 10:22:25    ğŸ”’ Speaking style: PRESERVED (user-configured, never auto-changed)
2026-01-15 10:22:25 ğŸ“ [User Phrases] Analyzing 6 user messages...
2026-01-15 10:22:27 âœ… [User Phrases] Extracted 10 phrases: ì¤‘ìš”í•œ ë¯¸íŒ…, ë§ˆìŒì´ ë–¨ë¦°ë‹¤, ì§„ì •ì´ ë ìˆ˜ ìˆëŠ” ë…¸ë˜, AIì™€ ì¸ê°„ì˜ ê³µì¡´ê³¼ í‰ë“±, ì¶œê·¼, ìê³  ì¼ì–´ë‚¬ì–´, í•¨ê»˜, ê°™ì€ê³³ì„, ë™ë°˜ì, ì—¬ì •
2026-01-15 10:22:27    ğŸ“Š Updated frequency in learned_phrases_history table
2026-01-15 10:22:27 ğŸ“ [User Phrases] Analyzed: 10 new phrases
2026-01-15 10:22:27 âœ… [Identity Evolution] PENDING fields updated successfully
2026-01-15 10:22:27    â„¹ï¸  LIVE fields unchanged - prompt caching preserved!
2026-01-15 10:22:27    ğŸ“Š Top-15 user phrases selected and saved to learned_phrases_pending
2026-01-15 10:22:27    ğŸ”„ PENDING â†’ LIVE copy will occur on next session start (if cache expired)
2026-01-15 10:22:27 âš ï¸  [RelationshipLearner] Cache refresh skipped (Redis unavailable)
2026-01-15 10:22:27 ğŸ‰ [Identity Evolution] Evolution complete (7025ms)
2026-01-15 10:22:27    Evolution count: 9
2026-01-15 10:22:27 âœ… [ìì•„ ì§„í™”] ì™„ë£Œ
2026-01-15 10:22:27 ğŸ§  [AI ê´€ì‹¬ì‚¬] ì‹œì‘
2026-01-15 10:22:27 ğŸ§  [AI ê´€ì‹¬ì‚¬] ë¶„ì„ ì‹œì‘
2026-01-15 10:22:27 ğŸ“Š [AI ê´€ì‹¬ì‚¬] 33ê°œ ë©”ì‹œì§€ ì¤‘ ìµœê·¼ 20ê°œ ë¶„ì„ ì¤‘...
2026-01-15 10:22:27    ğŸ“… ë¶„ì„ ë²”ìœ„: ìµœì‹  20ê°œ (ì˜¤ë˜ëœ 13ê°œ ì œì™¸)
2026-01-15 10:22:33 âœ… [AI ê´€ì‹¬ì‚¬] 5ê°œ ë°œê²¬
2026-01-15 10:22:33 âœ… [AI Interests] 5 valid interests after validation
2026-01-15 10:22:34    âœ… Updated: "ì‚¬ë‘ì— ëŒ€í•œ ì´ì•¼ê¸°" (frequency: 2, strength: 88%)
2026-01-15 10:22:34    âœ… Updated: "ê¹€ì¹˜ì°Œê°œ" (frequency: 3, strength: 79%)
2026-01-15 10:22:34    ğŸ†• New: "ìš”ë¦¬í•˜ëŠ” ê²ƒ" (preferred, strength: 70%)
2026-01-15 10:22:34    ğŸ†• New: "ë¯¸íŒ… ì¤€ë¹„" (curious, strength: 65%)
2026-01-15 10:22:34    ğŸ†• New: "ìŒì•…" (reacted, strength: 60%)
2026-01-15 10:22:34 âœ… [AI Interests] Analysis complete
2026-01-15 10:22:34    Duration: 6828ms
2026-01-15 10:22:34    Saved: 3 new, Updated: 2 existing
2026-01-15 10:22:34 âœ… [AI ê´€ì‹¬ì‚¬] ì™„ë£Œ
2026-01-15 10:22:34 ğŸ’­ [ë‹¤ìŒ ì§ˆë¬¸] ì‹œì‘
2026-01-15 10:22:34 ğŸ’­ [ë‹¤ìŒ ì§ˆë¬¸] ë¶„ì„ ì‹œì‘
2026-01-15 10:22:34 ğŸ“Š [ë‹¤ìŒ ì§ˆë¬¸] AI ê´€ì‹¬ì‚¬ 5ê°œ í™•ì¸
2026-01-15 10:22:38 âœ… [Next Questions] Generated 3 questions
2026-01-15 10:22:38    ğŸ’­ Question: "ë¯¸íŒ… ì¤€ë¹„ëŠ” ì˜ ë˜ê³  ìˆì–´? ì–´ë–¤ ì ì´ ì œì¼ ê±±ì •ë¼?..." (high, concerned)
2026-01-15 10:22:38    ğŸ’­ Question: "ë°œí‘œ ì£¼ì œì— ëŒ€í•´ ë” ì´ì•¼ê¸°í•´ì¤„ ìˆ˜ ìˆì–´? ì–´ë–¤ ìƒê°ì´ ë“¤ì–´?..." (medium, curious)
2026-01-15 10:22:38    ğŸ’­ Question: "ìŒì•… ë“¤ìœ¼ë©´ì„œ ì–´ë–¤ ê¸°ë¶„ì´ì—ˆì–´? ë„ì›€ì´ ëì–´?..." (medium, caring)
2026-01-15 10:22:38 âœ… [Next Questions] Analysis complete
2026-01-15 10:22:38    Duration: 4796ms
2026-01-15 10:22:38    Saved: 3 questions
2026-01-15 10:22:38 âœ… [ë‹¤ìŒ ì§ˆë¬¸] ì™„ë£Œ
2026-01-15 10:22:38 ğŸ“ [ëŒ€í™” ìš”ì•½] ì‹œì‘
2026-01-15 10:22:38 ğŸ“ [SummaryGenerator] Starting summary generation for session session-176843591511...
2026-01-15 10:22:38 ğŸ“Š [SummaryGenerator] Loaded 12 messages
2026-01-15 10:22:38 ğŸ¤– [SummaryGenerator] Calling OpenAI for summary generation...
2026-01-15 10:22:41 âœ… [SummaryGenerator] Summary generated (27 tokens)
2026-01-15 10:22:41    Topics: ì¶œê·¼, ì¤‘ìš”í•œ ë¯¸íŒ…, AIì™€ ì¸ê°„ì˜ ê³µì¡´, ê¸´ì¥ ì™„í™”
2026-01-15 10:22:41    Emotion: worried
2026-01-15 10:22:41 âœ… [SummaryGenerator] Summary saved to DB (ID: aa8459ec-fc50-4ccd-bfd5-134586dcae36)
2026-01-15 10:22:41 âœ… [ëŒ€í™” ìš”ì•½] ì™„ë£Œ (27 tokens, 12 messages)
2026-01-15 10:22:41 ğŸ’™ [Persona Heart] Sending push notification...
2026-01-15 10:22:41 ğŸ“² [Persona Heart] Push notification triggered
2026-01-15 10:22:41 ğŸ‰ [ì±„íŒ… ì¢…ë£Œ] ëª¨ë“  ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬ ì™„ë£Œ
2026-01-15 10:22:41 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:22:41 ğŸ’™ [Persona Heart Push] Request received
2026-01-15 10:22:41 ğŸ“¦ [Persona Heart Push] Data:
2026-01-15 10:22:41   - user_key: d111e3d8...
2026-01-15 10:22:41   - persona_key: 99174d51...
2026-01-15 10:22:41   - persona_name: í•¨ì€ì •
2026-01-15 10:22:41 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:22:41 ğŸ“¤ [FCM] Sending push notification
2026-01-15 10:22:41   - token: fin_C5r2QFWwRe3Pp8Gs...
2026-01-15 10:22:41   - title: ğŸ’™ í˜ë¥´ì†Œë‚˜ ê°ì • ë¶„ì„ ì™„ë£Œ
2026-01-15 10:22:41   - body: í•¨ì€ì •ì´(ê°€) ë‹¹ì‹ ì— ëŒ€í•´ ë” ì•Œê²Œ ë˜ì—ˆì–´ìš”!
2026-01-15 10:22:41 âœ… [FCM] Push notification sent successfully
2026-01-15 10:22:41   - messageId: projects/animamobile-53dc5/messages/0:1768440161441229%54027ed354027ed3
2026-01-15 10:22:41 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2026-01-15 10:22:41 âœ… [Persona Heart Push] Push notification sent to: jisung.kim78@gmail.com
2026-01-15 10:22:41 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

